<!DOCTYPE HTML>
<html><head><title>Juvix Documentation</title><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1"><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script type="text/javascript" id="MathJax-script" src="assets/js/tex-chtml.js"></script><script type="text/javascript" src="https://livejs.com/live.js"></script><link href="assets/css/source-ayu-light.css" rel="stylesheet" type="text/css"><link href="assets/css/linuwial.css" rel="stylesheet" type="text/css"><script src="assets/js/toggle.js" type="text/javascript"></script></head><body class="js-enabled"><div id="package-header"><span class="caption">Anoma abstract resource machine - 0.0.0</span><ul id="page-menu" class="links"><li><a href="Apps.Sudoku-src.html">Source</a></li><li><a href="index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><p class="caption">Apps.Sudoku</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#sec:description">Description</a></li><li><a href="#sec:interface">Definitions</a></li></ul></div></div><div id="description"><div class="doc"><a id="sec:description" href="sec:description"><h1>Description</h1></a><p>A Sudoku puzzle application</p><p>To start an instance of the application a Dealer publishes a partial  transaction which creates two <span class="annot"><a href="Simulator.Resource.html#722"><span class="ju-inductive">Resource</span></a></span>s:</p><p>1.1 A Sudoku <span class="annot"><a href="Simulator.Resource.html#722"><span class="ju-inductive">Resource</span></a></span> that contains the initial state of the puzzle.</p><p>1.2 A <span class="annot"><a href="Simulator.Resource.html#722"><span class="ju-inductive">Resource</span></a></span> containing a logic function that checks the completed  solution to the puzzle.</p><p>And consumes another resource:</p><p>2.1 A Reward <span class="annot"><a href="Simulator.Resource.html#722"><span class="ju-inductive">Resource</span></a></span> with quantity equal to the number of unfilled  squares in the puzzle.</p><p>Participants publish partial transactions which consume:</p><p>3.1 A Sudoku <span class="annot"><a href="Simulator.Resource.html#722"><span class="ju-inductive">Resource</span></a></span> which represents the current parital solution to the puzzle.</p><p>And create:</p><p>3.2. A Reward <span class="annot"><a href="Simulator.Resource.html#722"><span class="ju-inductive">Resource</span></a></span> with quantity equal to the number of squares that the participant fills in on the Sudoku grid.</p><p>3.3. A Sudoku <span class="annot"><a href="Simulator.Resource.html#722"><span class="ju-inductive">Resource</span></a></span> that contains an updated Sudoku grid with their solutions filled in.</p><p>In the partial transaction which contains a full solution to the puzzle, the  participant additionally consumes the <span class="annot"><a href="Simulator.Resource.html#722"><span class="ju-inductive">Resource</span></a></span> containing the Dealer&#39;s  logic function which was created in 1.2.</p></div></div><div id="interface"><a id="sec:interface" href="sec:interface"><h1>Definitions</h1></a><div class="top"><p class="src"><span class="ju-keyword">module</span> <span class="ju-define"><span id="1270"><span class="annot"><a href="Apps.Sudoku.html#1270"><span class="annot"><a href="Apps.Sudoku.html#1270"><span class="ju-var">Reward</span></a></span></a></span></span></span><a href="Apps.Sudoku-src.html#1270" class="link">Source</a><a href="#1270" class="selflink">#</a></p><div class="doc"></div></div><div class="subs"><div class="top"><p class="src"><span class="ju-define"><span id="1266"><span class="annot"><a href="Apps.Sudoku.html#1266"><span class="annot"><a href="Apps.Sudoku.html#1266"><span class="ju-function">staticData</span></a></span></a></span></span></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Data.ByteString.html#717"><span class="ju-function">ByteString</span></a></span><a href="Apps.Sudoku-src.html#1266" class="link">Source</a><a href="#1266" class="selflink">#</a></p><div class="doc"></div></div><div class="top"><p class="src"><span class="ju-define"><span id="1267"><span class="annot"><a href="Apps.Sudoku.html#1267"><span class="annot"><a href="Apps.Sudoku.html#1267"><span class="ju-function">mkResource</span></a></span></a></span></span></span> <span class="ju-delimiter">(</span><span class="annot"><a href="Apps.Sudoku.html#1269"><span class="ju-var">n</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Stdlib.Data.Int.Base.html#590"><span class="ju-inductive">Int</span></a></span><span class="ju-delimiter">)</span> <span class="ju-keyword">:</span> <span class="annot"><a href="Simulator.Resource.html#722"><span class="ju-inductive">Resource</span></a></span><a href="Apps.Sudoku-src.html#1267" class="link">Source</a><a href="#1267" class="selflink">#</a></p><div class="doc"></div></div><div class="top"><p class="src"><span class="ju-define"><span id="1268"><span class="annot"><a href="Apps.Sudoku.html#1268"><span class="annot"><a href="Apps.Sudoku.html#1268"><span class="ju-function">denomination</span></a></span></a></span></span></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Simulator.Denomination.html#721"><span class="ju-function">Denomination</span></a></span><a href="Apps.Sudoku-src.html#1268" class="link">Source</a><a href="#1268" class="selflink">#</a></p><div class="doc"></div></div></div><div class="top"><p class="src"><span class="ju-keyword">module</span> <span class="ju-define"><span id="1284"><span class="annot"><a href="Apps.Sudoku.html#1284"><span class="annot"><a href="Apps.Sudoku.html#1284"><span class="ju-var">Sudoku</span></a></span></a></span></span></span><a href="Apps.Sudoku-src.html#1284" class="link">Source</a><a href="#1284" class="selflink">#</a></p><div class="doc"><p>Definitions related to the Sudoku <span class="annot"><a href="Simulator.Resource.html#722"><span class="ju-inductive">Resource</span></a></span> in the application</p></div></div><div class="subs"><div class="top"><p class="src"><span class="ju-keyword">type</span> <span class="ju-define"><span id="1271"><span class="annot"><a href="Apps.Sudoku.html#1271"><span class="annot"><a href="Apps.Sudoku.html#1271"><span class="ju-inductive">Puzzle</span></a></span></a></span></span></span><a href="Apps.Sudoku-src.html#1271" class="link">Source</a><a href="#1271" class="selflink">#</a></p><div class="doc"></div></div><div class="subs constructors"><p class="caption">Constructors</p><table><tbody><tr><td class="src"><span class="ju-keyword">|</span> <span class="ju-define"><span id="1272"><span class="annot"><a href="Apps.Sudoku.html#1272"><span class="annot"><a href="Apps.Sudoku.html#1272"><span class="ju-constructor">mkPuzzle</span></a></span></a></span></span></span> <span class="ju-delimiter">{</span>
    <span class="annot"><a href="Apps.Sudoku.html#1278"><span class="ju-var">logicHash</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Simulator.Denomination.html#720"><span class="ju-inductive">LogicHash</span></a></span><span class="ju-delimiter">;</span>
    <span class="annot"><a href="Apps.Sudoku.html#1279"><span class="ju-var">solution</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Data.ByteString.html#717"><span class="ju-function">ByteString</span></a></span>
  <span class="ju-delimiter">}</span></td><td class="doc"></td></tr></tbody></table></div><div class="top"><p class="src"><span class="ju-define"><span id="1276"><span class="annot"><a href="Apps.Sudoku.html#1276"><span class="annot"><a href="Apps.Sudoku.html#1276"><span class="ju-function">mkResource</span></a></span></a></span></span></span> <span class="ju-delimiter">(</span><span class="annot"><a href="Apps.Sudoku.html#1280"><span class="ju-var">p</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Apps.Sudoku.html#1271"><span class="ju-inductive">Puzzle</span></a></span><span class="ju-delimiter">)</span> <span class="ju-delimiter">(</span><span class="annot"><a href="Apps.Sudoku.html#1281"><span class="ju-var">d</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Data.ByteString.html#717"><span class="ju-function">ByteString</span></a></span><span class="ju-delimiter">)</span> <span class="ju-delimiter">(</span><span class="annot"><a href="Apps.Sudoku.html#1282"><span class="ju-var">n</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Stdlib.Data.Int.Base.html#590"><span class="ju-inductive">Int</span></a></span><span class="ju-delimiter">)</span> <span class="ju-keyword">:</span> <span class="annot"><a href="Simulator.Resource.html#722"><span class="ju-inductive">Resource</span></a></span><a href="Apps.Sudoku-src.html#1276" class="link">Source</a><a href="#1276" class="selflink">#</a></p><div class="doc"></div></div><div class="top"><p class="src"><span class="ju-define"><span id="1277"><span class="annot"><a href="Apps.Sudoku.html#1277"><span class="annot"><a href="Apps.Sudoku.html#1277"><span class="ju-function">denomination</span></a></span></a></span></span></span> <span class="ju-delimiter">(</span><span class="annot"><a href="Apps.Sudoku.html#1283"><span class="ju-var">p</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Apps.Sudoku.html#1271"><span class="ju-inductive">Puzzle</span></a></span><span class="ju-delimiter">)</span> <span class="ju-keyword">:</span> <span class="annot"><a href="Simulator.Denomination.html#721"><span class="ju-function">Denomination</span></a></span><a href="Apps.Sudoku-src.html#1277" class="link">Source</a><a href="#1277" class="selflink">#</a></p><div class="doc"></div></div></div><div class="top"><p class="src"><span class="ju-define"><span id="1285"><span class="annot"><a href="Apps.Sudoku.html#1285"><span class="annot"><a href="Apps.Sudoku.html#1285"><span class="ju-function">checkTransition</span></a></span></a></span></span></span> <span class="ju-delimiter">{{</span><span class="annot"><a href="Stdlib.Trait.Partial.html#521"><span class="ju-inductive">Partial</span></a></span><span class="ju-delimiter">}}</span> <span class="ju-delimiter">(</span><span class="annot"><a href="Apps.Sudoku.html#1287"><span class="ju-var">fromResource</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Simulator.Resource.html#722"><span class="ju-inductive">Resource</span></a></span><span class="ju-delimiter">)</span> <span class="ju-delimiter">(</span><span class="annot"><a href="Apps.Sudoku.html#1288"><span class="ju-var">toResource</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Simulator.Resource.html#722"><span class="ju-inductive">Resource</span></a></span><span class="ju-delimiter">)</span> <span class="ju-delimiter">(</span><span class="annot"><a href="Apps.Sudoku.html#1289"><span class="ju-var">reward</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Simulator.Resource.html#722"><span class="ju-inductive">Resource</span></a></span><span class="ju-delimiter">)</span>
  <span class="ju-keyword">:</span> <span class="annot"><a href="Juvix.Builtin.V1.Bool.html#7"><span class="ju-inductive">Bool</span></a></span><a href="Apps.Sudoku-src.html#1285" class="link">Source</a><a href="#1285" class="selflink">#</a></p><div class="doc"><p>Checks the state transition.     * The new <span class="annot"><a href="Simulator.Resource.html#722"><span class="ju-inductive">Resource</span></a></span> represents a valid Sudoku grid     * The size of the encoded solution doesn&#39;t change.     * The number of filled in squares does not decrease.     * The claimed reward is equal to the number of newly filled in squares.     * The only squares that change between the previous and new solutinos     are changes from zero (i.e unfilled) to non-zero (i.e filled). </p></div></div><div class="top"><p class="src"><span class="ju-define"><span id="1286"><span class="annot"><a href="Apps.Sudoku.html#1286"><span class="annot"><a href="Apps.Sudoku.html#1286"><span class="ju-function">logicFunction</span></a></span></a></span></span></span> <span class="ju-delimiter">{{</span><span class="annot"><a href="Stdlib.Trait.Partial.html#521"><span class="ju-inductive">Partial</span></a></span><span class="ju-delimiter">}}</span> <span class="ju-keyword">:</span> <span class="annot"><a href="Apps.Sudoku.html#1271"><span class="ju-inductive">Sudoku<span class="ju-delimiter">.</span>Puzzle</span></a></span> <span class="ju-keyword">-&gt;</span> <span class="annot"><a href="Simulator.PartialTx.html#774"><span class="ju-function">LogicFunction</span></a></span><a href="Apps.Sudoku-src.html#1286" class="link">Source</a><a href="#1286" class="selflink">#</a></p><div class="doc"><p>The logic function for the Sudoku solution parital transaction.</p><p>Performs the following check:</p><p>If there is a consumed <span class="annot"><a href="Simulator.Resource.html#722"><span class="ju-inductive">Resource</span></a></span> representing a Sudoku puzzle then:</p><p>1. There is exactly one created <span class="annot"><a href="Simulator.Resource.html#722"><span class="ju-inductive">Resource</span></a></span> corresponding to a new solution and exactly one created <span class="annot"><a href="Simulator.Resource.html#722"><span class="ju-inductive">Resource</span></a></span> representing the claimed reward.</p><p>2. The transition from a Sudoku puzzle to the new solution and reward satisfies the <span class="annot"><a href="Apps.Sudoku.html#1285"><span class="ju-function">checkTransition</span></a></span> function.</p><p>If the partial transaction does not consume a Sudoku puzzle then it is vacuously valid.</p><p>If the logic function part of a <span class="annot"><a href="Simulator.Resource.html#722"><span class="ju-inductive">Resource</span></a></span> that is created by the partial transaction then it is valid.</p></div></div><div class="top"><p class="src"><span class="ju-keyword">module</span> <span class="ju-define"><span id="1323"><span class="annot"><a href="Apps.Sudoku.html#1323"><span class="annot"><a href="Apps.Sudoku.html#1323"><span class="ju-var">Dealer</span></a></span></a></span></span></span><a href="Apps.Sudoku-src.html#1323" class="link">Source</a><a href="#1323" class="selflink">#</a></p><div class="doc"></div></div><div class="subs"><div class="top"><p class="src"><span class="ju-define"><span id="1308"><span class="annot"><a href="Apps.Sudoku.html#1308"><span class="annot"><a href="Apps.Sudoku.html#1308"><span class="ju-function">logicFunction</span></a></span></a></span></span></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Apps.Sudoku.html#1271"><span class="ju-inductive">Sudoku<span class="ju-delimiter">.</span>Puzzle</span></a></span> <span class="ju-keyword">-&gt;</span> <span class="annot"><a href="Simulator.PartialTx.html#774"><span class="ju-function">LogicFunction</span></a></span><a href="Apps.Sudoku-src.html#1308" class="link">Source</a><a href="#1308" class="selflink">#</a></p><div class="doc"><p>The logic function for the Sudoku dealer parital transaction.</p><p>Performs the following check:</p><p>If there is exactly one consumed <span class="annot"><a href="Simulator.Resource.html#722"><span class="ju-inductive">Resource</span></a></span> representing a Sudoku puzzle then:</p><p>1. The solution matches the Dealer&#39;s solution.</p><p>If the partial transaction does not consume a Sudoku puzzle then it is vacuously valid.</p><p>If the logic function part of a <span class="annot"><a href="Simulator.Resource.html#722"><span class="ju-inductive">Resource</span></a></span> that is created by the partial transaction then it is valid. </p></div></div><div class="top"><p class="src"><span class="ju-define"><span id="1309"><span class="annot"><a href="Apps.Sudoku.html#1309"><span class="annot"><a href="Apps.Sudoku.html#1309"><span class="ju-function">logicHash</span></a></span></a></span></span></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Apps.Sudoku.html#1271"><span class="ju-inductive">Sudoku<span class="ju-delimiter">.</span>Puzzle</span></a></span> <span class="ju-keyword">-&gt;</span> <span class="annot"><a href="Simulator.Denomination.html#720"><span class="ju-inductive">LogicHash</span></a></span><a href="Apps.Sudoku-src.html#1309" class="link">Source</a><a href="#1309" class="selflink">#</a></p><div class="doc"></div></div><div class="top"><p class="src"><span class="ju-define"><span id="1310"><span class="annot"><a href="Apps.Sudoku.html#1310"><span class="annot"><a href="Apps.Sudoku.html#1310"><span class="ju-function">staticData</span></a></span></a></span></span></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Apps.Sudoku.html#1271"><span class="ju-inductive">Sudoku<span class="ju-delimiter">.</span>Puzzle</span></a></span> <span class="ju-keyword">-&gt;</span> <span class="annot"><a href="Data.ByteString.html#717"><span class="ju-function">ByteString</span></a></span><a href="Apps.Sudoku-src.html#1310" class="link">Source</a><a href="#1310" class="selflink">#</a></p><div class="doc"></div></div><div class="top"><p class="src"><span class="ju-define"><span id="1311"><span class="annot"><a href="Apps.Sudoku.html#1311"><span class="annot"><a href="Apps.Sudoku.html#1311"><span class="ju-function">denomination</span></a></span></a></span></span></span> <span class="ju-delimiter">(</span><span class="annot"><a href="Apps.Sudoku.html#1320"><span class="ju-var">d</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Apps.Sudoku.html#1271"><span class="ju-inductive">Sudoku<span class="ju-delimiter">.</span>Puzzle</span></a></span><span class="ju-delimiter">)</span> <span class="ju-keyword">:</span> <span class="annot"><a href="Simulator.Denomination.html#721"><span class="ju-function">Denomination</span></a></span><a href="Apps.Sudoku-src.html#1311" class="link">Source</a><a href="#1311" class="selflink">#</a></p><div class="doc"></div></div><div class="top"><p class="src"><span class="ju-define"><span id="1312"><span class="annot"><a href="Apps.Sudoku.html#1312"><span class="annot"><a href="Apps.Sudoku.html#1312"><span class="ju-function">mkResource</span></a></span></a></span></span></span> <span class="ju-delimiter">(</span><span class="annot"><a href="Apps.Sudoku.html#1321"><span class="ju-var">d</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Apps.Sudoku.html#1271"><span class="ju-inductive">Sudoku<span class="ju-delimiter">.</span>Puzzle</span></a></span><span class="ju-delimiter">)</span> <span class="ju-delimiter">(</span><span class="annot"><a href="Apps.Sudoku.html#1322"><span class="ju-var">n</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Stdlib.Data.Int.Base.html#590"><span class="ju-inductive">Int</span></a></span><span class="ju-delimiter">)</span> <span class="ju-keyword">:</span> <span class="annot"><a href="Simulator.Resource.html#722"><span class="ju-inductive">Resource</span></a></span><a href="Apps.Sudoku-src.html#1312" class="link">Source</a><a href="#1312" class="selflink">#</a></p><div class="doc"></div></div></div><div class="top"><p class="src"><span class="ju-define"><span id="1324"><span class="annot"><a href="Apps.Sudoku.html#1324"><span class="annot"><a href="Apps.Sudoku.html#1324"><span class="ju-function">dealer</span></a></span></a></span></span></span> <span class="ju-delimiter">(</span><span class="annot"><a href="Apps.Sudoku.html#1326"><span class="ju-var">puzzle</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Apps.Sudoku.html#1271"><span class="ju-inductive">Sudoku<span class="ju-delimiter">.</span>Puzzle</span></a></span><span class="ju-delimiter">)</span> <span class="ju-delimiter">(</span><span class="annot"><a href="Apps.Sudoku.html#1327"><span class="ju-var">initialBoard</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Data.ByteString.html#717"><span class="ju-function">ByteString</span></a></span><span class="ju-delimiter">)</span> <span class="ju-keyword">:</span> <span class="annot"><a href="Simulator.PartialTx.html#765"><span class="ju-inductive">PartialTx</span></a></span><a href="Apps.Sudoku-src.html#1324" class="link">Source</a><a href="#1324" class="selflink">#</a></p><div class="doc"></div></div><div class="top"><p class="src"><span class="ju-define"><span id="1325"><span class="annot"><a href="Apps.Sudoku.html#1325"><span class="annot"><a href="Apps.Sudoku.html#1325"><span class="ju-function">logicFunctions</span></a></span></a></span></span></span> <span class="ju-delimiter">{{</span><span class="annot"><a href="Stdlib.Trait.Partial.html#521"><span class="ju-inductive">Partial</span></a></span><span class="ju-delimiter">}}</span> <span class="ju-delimiter">(</span><span class="annot"><a href="Apps.Sudoku.html#1328"><span class="ju-var">puzzle</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Apps.Sudoku.html#1271"><span class="ju-inductive">Sudoku<span class="ju-delimiter">.</span>Puzzle</span></a></span><span class="ju-delimiter">)</span>
  <span class="ju-keyword">:</span> <span class="annot"><a href="Data.Map.html#1024"><span class="ju-inductive">Map</span></a></span> <span class="annot"><a href="Simulator.Denomination.html#720"><span class="ju-inductive">LogicHash</span></a></span> <span class="annot"><a href="Simulator.PartialTx.html#774"><span class="ju-function">LogicFunction</span></a></span><a href="Apps.Sudoku-src.html#1325" class="link">Source</a><a href="#1325" class="selflink">#</a></p><div class="doc"></div></div></div></div><div id="footer"><p>Powered by <a href="https://juvix.org">Juvix </a><a href="https://github.com/anoma/juvix/commit/9f8c26d">0.5.5-9f8c26d</a></p><a href="https://juvix.org"><img id="tara" src="assets/images/tara-smiling.svg" alt="Tara"></a></div></body></html>