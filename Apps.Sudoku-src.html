<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml"><meta charset="UTF-8"><link href="assets/css/source-ayu-light.css" rel="stylesheet" type="text/css"><script src="assets/js/highlight.js" type="text/javascript"></script><div id="package-header"><span class="caption"></span></div><pre id="src-content"><span class="ju-judoc">{--</span> <span class="ju-judoc">A Sudoku puzzle application</span>

<span class="ju-judoc">To start an instance of the application a Dealer publishes a partial</span>
<span class="ju-judoc"> transaction which creates two </span><span class="ju-judoc">;</span><span class="annot"><a href="Simulator.Resource-src.html#722"><span class="ju-inductive">Resource</span></a></span><span class="ju-judoc">;</span><span class="ju-judoc">s:</span>

<span class="ju-judoc">1.1 A Sudoku </span><span class="ju-judoc">;</span><span class="annot"><a href="Simulator.Resource-src.html#722"><span class="ju-inductive">Resource</span></a></span><span class="ju-judoc">;</span><span class="ju-judoc"> that contains the initial state of the puzzle.</span>

<span class="ju-judoc">1.2 A </span><span class="ju-judoc">;</span><span class="annot"><a href="Simulator.Resource-src.html#722"><span class="ju-inductive">Resource</span></a></span><span class="ju-judoc">;</span><span class="ju-judoc"> containing a logic function that checks the completed</span>
<span class="ju-judoc"> solution to the puzzle.</span>

<span class="ju-judoc">And consumes another resource:</span>

<span class="ju-judoc">2.1 A Reward </span><span class="ju-judoc">;</span><span class="annot"><a href="Simulator.Resource-src.html#722"><span class="ju-inductive">Resource</span></a></span><span class="ju-judoc">;</span><span class="ju-judoc"> with quantity equal to the number of unfilled</span>
<span class="ju-judoc"> squares in the puzzle.</span>

<span class="ju-judoc">Participants publish partial transactions which consume:</span>

<span class="ju-judoc">3.1 A Sudoku </span><span class="ju-judoc">;</span><span class="annot"><a href="Simulator.Resource-src.html#722"><span class="ju-inductive">Resource</span></a></span><span class="ju-judoc">;</span><span class="ju-judoc"> which represents the current parital solution to the puzzle.</span>

<span class="ju-judoc">And create:</span>

<span class="ju-judoc">3.2. A Reward </span><span class="ju-judoc">;</span><span class="annot"><a href="Simulator.Resource-src.html#722"><span class="ju-inductive">Resource</span></a></span><span class="ju-judoc">;</span><span class="ju-judoc"> with quantity equal to the number of squares that the participant fills in on the Sudoku grid.</span>

<span class="ju-judoc">3.3. A Sudoku </span><span class="ju-judoc">;</span><span class="annot"><a href="Simulator.Resource-src.html#722"><span class="ju-inductive">Resource</span></a></span><span class="ju-judoc">;</span><span class="ju-judoc"> that contains an updated Sudoku grid with their solutions filled in.</span>

<span class="ju-judoc">In the partial transaction which contains a full solution to the puzzle, the</span>
<span class="ju-judoc"> participant additionally consumes the </span><span class="ju-judoc">;</span><span class="annot"><a href="Simulator.Resource-src.html#722"><span class="ju-inductive">Resource</span></a></span><span class="ju-judoc">;</span><span class="ju-judoc"> containing the Dealer&#39;s</span>
<span class="ju-judoc"> logic function which was created in 1.2.</span> <span class="ju-judoc">--}</span>
<span class="ju-keyword">module</span> <span id="0"><span class="annot"><a href="Apps.Sudoku-src.html#0"><span class="annot"><a href="Apps.Sudoku-src.html#0"><span class="ju-var">Apps<span class="ju-delimiter">.</span>Sudoku</span></a></span></a></span></span><span class="ju-delimiter">;</span>

<span class="ju-keyword">import</span> <span class="annot"><a href="Simulator-src.html#1"><span class="ju-var">Simulator</span></a></span> <span class="ju-keyword">open</span><span class="ju-delimiter">;</span>
<span class="ju-keyword">import</span> <span class="annot"><a href="Simulator.Resource-src.html#2"><span class="ju-var">Simulator<span class="ju-delimiter">.</span>Resource</span></a></span> <span class="ju-keyword">open</span> <span class="ju-keyword">using</span> <span class="ju-delimiter">{</span><span class="annot"><a href="Simulator.Resource-src.html#723"><span class="ju-constructor">mkResource</span></a></span> <span class="ju-keyword">as</span> <span class="annot"><a href="Simulator.Resource-src.html#723"><span class="ju-constructor">mkResource&#39;</span></a></span><span class="ju-delimiter">}</span><span class="ju-delimiter">;</span>

<span class="ju-keyword">import</span> <span class="annot"><a href="Apps.Sudoku.Validator-src.html#1142"><span class="ju-var">Apps<span class="ju-delimiter">.</span>Sudoku<span class="ju-delimiter">.</span>Validator</span></a></span> <span class="ju-keyword">as</span> <span id="1142"><span class="annot"><a href="Apps.Sudoku.Validator-src.html#1142"><span class="annot"><a href="Apps.Sudoku.Validator-src.html#1142"><span class="ju-var">Sudoku</span></a></span></a></span></span><span class="ju-delimiter">;</span>
<span class="ju-keyword">import</span> <span class="annot"><a href="Apps.Sudoku.Serializer-src.html#1241"><span class="ju-var">Apps<span class="ju-delimiter">.</span>Sudoku<span class="ju-delimiter">.</span>Serializer</span></a></span> <span class="ju-keyword">as</span> <span id="1241"><span class="annot"><a href="Apps.Sudoku.Serializer-src.html#1241"><span class="annot"><a href="Apps.Sudoku.Serializer-src.html#1241"><span class="ju-var">Sudoku</span></a></span></a></span></span><span class="ju-delimiter">;</span>

<span class="ju-keyword">import</span> <span class="annot"><a href="Simulator.Kind-src.html#719"><span class="ju-var">Simulator<span class="ju-delimiter">.</span>Kind</span></a></span> <span class="ju-keyword">as</span> <span id="719"><span class="annot"><a href="Simulator.Kind-src.html#719"><span class="annot"><a href="Simulator.Kind-src.html#719"><span class="ju-var">D</span></a></span></a></span></span><span class="ju-delimiter">;</span>

<span class="ju-keyword">import</span> <span class="annot"><a href="Data.Map-src.html#789"><span class="ju-var">Data<span class="ju-delimiter">.</span>Map</span></a></span> <span class="ju-keyword">as</span> <span id="789"><span class="annot"><a href="Data.Map-src.html#789"><span class="annot"><a href="Data.Map-src.html#789"><span class="ju-var">Map</span></a></span></a></span></span><span class="ju-delimiter">;</span>
<span class="ju-keyword">open</span> <span class="annot"><a href="Data.Map-src.html#789"><span class="ju-var">Map</span></a></span> <span class="ju-keyword">using</span> <span class="ju-delimiter">{</span><span class="annot"><a href="Data.Map-src.html#1026"><span class="ju-inductive">Map</span></a></span><span class="ju-delimiter">}</span><span class="ju-delimiter">;</span>

<span class="ju-keyword">import</span> <span class="annot"><a href="Simulator.Prelude-src.html#3"><span class="ju-var">Simulator<span class="ju-delimiter">.</span>Prelude</span></a></span> <span class="ju-keyword">open</span><span class="ju-delimiter">;</span>
<span class="ju-keyword">import</span> <span class="annot"><a href="Stdlib.Trait.Partial-src.html#517"><span class="ju-var">Stdlib<span class="ju-delimiter">.</span>Trait<span class="ju-delimiter">.</span>Partial</span></a></span> <span class="ju-keyword">open</span><span class="ju-delimiter">;</span>

<span class="ju-keyword">module</span> <span id="1272"><span class="annot"><a href="Apps.Sudoku-src.html#1272"><span class="annot"><a href="Apps.Sudoku-src.html#1272"><span class="ju-var">Reward</span></a></span></a></span></span><span class="ju-delimiter">;</span>
  <span id="1268"><span class="annot"><a href="Apps.Sudoku-src.html#1268"><span class="annot"><a href="Apps.Sudoku-src.html#1268"><span class="ju-function">label</span></a></span></a></span></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Data.ByteString-src.html#717"><span class="ju-function">ByteString</span></a></span> <span class="ju-keyword">:=</span> <span class="ju-keyword">[</span><span class="ju-number">0</span><span class="ju-keyword">]</span><span class="ju-delimiter">;</span>
  <span id="1269"><span class="annot"><a href="Apps.Sudoku-src.html#1269"><span class="annot"><a href="Apps.Sudoku-src.html#1269"><span class="ju-function">
  mkResource</span></a></span></a></span></span> <span class="ju-delimiter">(</span><span class="annot"><a href="Apps.Sudoku-src.html#1271"><span class="ju-var">n</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Stdlib.Data.Int.Base-src.html#590"><span class="ju-inductive">Int</span></a></span><span class="ju-delimiter">)</span> <span class="ju-keyword">:</span> <span class="annot"><a href="Simulator.Resource-src.html#722"><span class="ju-inductive">Resource</span></a></span> <span class="ju-keyword">:=</span>
    <span class="annot"><a href="Simulator.Resource-src.html#723"><span class="ju-constructor">mkResource&#39;</span></a></span>
      <span class="ju-delimiter">(</span>logicHash <span class="ju-keyword">:=</span> <span class="annot"><a href="Simulator.BuiltinResources-src.html#1097"><span class="ju-function">AlwaysValid<span class="ju-delimiter">.</span>logicHash</span></a></span><span class="ju-delimiter">;</span>
      label <span class="ju-keyword">:=</span> <span class="annot"><a href="Apps.Sudoku-src.html#1268"><span class="ju-function">label</span></a></span><span class="ju-delimiter">;</span>
      dynamicData <span class="ju-keyword">:=</span> <span class="annot"><a href="Juvix.Builtin.V1.List-src.html#117"><span class="ju-constructor">nil</span></a></span><span class="ju-delimiter">;</span>
      quantity <span class="ju-keyword">:=</span> <span class="annot"><a href="Apps.Sudoku-src.html#1271"><span class="ju-var">n</span></a></span><span class="ju-delimiter">)</span><span class="ju-delimiter">;</span>
  <span id="1270"><span class="annot"><a href="Apps.Sudoku-src.html#1270"><span class="annot"><a href="Apps.Sudoku-src.html#1270"><span class="ju-function">
  kind</span></a></span></a></span></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Simulator.Kind-src.html#721"><span class="ju-function">Kind</span></a></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="Simulator.BuiltinResources-src.html#1097"><span class="ju-function">AlwaysValid<span class="ju-delimiter">.</span>logicHash</span></a></span> <span class="annot"><a href="Juvix.Builtin.V1.List-src.html#118"><span class="ju-constructor">::</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1268"><span class="ju-function">label</span></a></span><span class="ju-delimiter">;</span>
<span class="ju-keyword">end</span><span class="ju-delimiter">;</span>

<span class="ju-judoc">---</span> <span class="ju-judoc">Definitions related to the Sudoku </span><span class="ju-judoc">;</span><span class="annot"><a href="Simulator.Resource-src.html#722"><span class="ju-inductive">Resource</span></a></span><span class="ju-judoc">;</span><span class="ju-judoc"> in the application</span>
<span class="ju-keyword">module</span> <span id="1286"><span class="annot"><a href="Apps.Sudoku-src.html#1286"><span class="annot"><a href="Apps.Sudoku-src.html#1286"><span class="ju-var">Sudoku</span></a></span></a></span></span><span class="ju-delimiter">;</span>
  
  <span class="ju-keyword">type</span> <span id="1273"><span class="annot"><a href="Apps.Sudoku-src.html#1273"><span class="annot"><a href="Apps.Sudoku-src.html#1273"><span class="ju-inductive">Puzzle</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
    <span id="1274"><span class="annot"><a href="Apps.Sudoku-src.html#1274"><span class="annot"><a href="Apps.Sudoku-src.html#1274"><span class="ju-constructor">mkPuzzle</span></a></span></a></span></span> <span class="ju-delimiter">{</span>
      <span class="annot"><a href="Apps.Sudoku-src.html#1280"><span class="ju-var">logicHash</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Simulator.Kind-src.html#720"><span class="ju-inductive">LogicHash</span></a></span><span class="ju-delimiter">;</span>
      <span class="annot"><a href="Apps.Sudoku-src.html#1281"><span class="ju-var">solution</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Data.ByteString-src.html#717"><span class="ju-function">ByteString</span></a></span>
    <span class="ju-delimiter">}</span><span class="ju-delimiter">;</span>
  <span id="1278"><span class="annot"><a href="Apps.Sudoku-src.html#1278"><span class="annot"><a href="Apps.Sudoku-src.html#1278"><span class="ju-function">
  mkResource</span></a></span></a></span></span> <span class="ju-delimiter">(</span><span class="annot"><a href="Apps.Sudoku-src.html#1282"><span class="ju-var">p</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Apps.Sudoku-src.html#1273"><span class="ju-inductive">Puzzle</span></a></span><span class="ju-delimiter">)</span> <span class="ju-delimiter">(</span><span class="annot"><a href="Apps.Sudoku-src.html#1283"><span class="ju-var">d</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Data.ByteString-src.html#717"><span class="ju-function">ByteString</span></a></span><span class="ju-delimiter">)</span> <span class="ju-delimiter">(</span><span class="annot"><a href="Apps.Sudoku-src.html#1284"><span class="ju-var">n</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Stdlib.Data.Int.Base-src.html#590"><span class="ju-inductive">Int</span></a></span><span class="ju-delimiter">)</span> <span class="ju-keyword">:</span> <span class="annot"><a href="Simulator.Resource-src.html#722"><span class="ju-inductive">Resource</span></a></span> <span class="ju-keyword">:=</span>
    <span class="annot"><a href="Simulator.Resource-src.html#723"><span class="ju-constructor">mkResource&#39;</span></a></span>
      <span class="ju-delimiter">(</span>logicHash <span class="ju-keyword">:=</span> <span class="annot"><a href="Apps.Sudoku-src.html#1275"><span class="ju-function">Puzzle<span class="ju-delimiter">.</span>logicHash</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1282"><span class="ju-var">p</span></a></span><span class="ju-delimiter">;</span>
      label <span class="ju-keyword">:=</span> <span class="annot"><a href="Apps.Sudoku-src.html#1276"><span class="ju-function">Puzzle<span class="ju-delimiter">.</span>solution</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1282"><span class="ju-var">p</span></a></span><span class="ju-delimiter">;</span>
      dynamicData <span class="ju-keyword">:=</span> <span class="annot"><a href="Apps.Sudoku-src.html#1283"><span class="ju-var">d</span></a></span><span class="ju-delimiter">;</span>
      quantity <span class="ju-keyword">:=</span> <span class="annot"><a href="Apps.Sudoku-src.html#1284"><span class="ju-var">n</span></a></span><span class="ju-delimiter">)</span><span class="ju-delimiter">;</span>
  <span id="1279"><span class="annot"><a href="Apps.Sudoku-src.html#1279"><span class="annot"><a href="Apps.Sudoku-src.html#1279"><span class="ju-function">
  kind</span></a></span></a></span></span> <span class="ju-delimiter">(</span><span class="annot"><a href="Apps.Sudoku-src.html#1285"><span class="ju-var">p</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Apps.Sudoku-src.html#1273"><span class="ju-inductive">Puzzle</span></a></span><span class="ju-delimiter">)</span> <span class="ju-keyword">:</span> <span class="annot"><a href="Simulator.Kind-src.html#721"><span class="ju-function">Kind</span></a></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="Apps.Sudoku-src.html#1275"><span class="ju-function">Puzzle<span class="ju-delimiter">.</span>logicHash</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1285"><span class="ju-var">p</span></a></span> <span class="annot"><a href="Juvix.Builtin.V1.List-src.html#118"><span class="ju-constructor">::</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1276"><span class="ju-function">Puzzle<span class="ju-delimiter">.</span>solution</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1285"><span class="ju-var">p</span></a></span><span class="ju-delimiter">;</span>
<span class="ju-keyword">end</span><span class="ju-delimiter">;</span>

<span class="ju-judoc">{--</span> <span class="ju-judoc">Checks the state transition.</span>
<span class="ju-judoc">    * The new </span><span class="ju-judoc">;</span><span class="annot"><a href="Simulator.Resource-src.html#722"><span class="ju-inductive">Resource</span></a></span><span class="ju-judoc">;</span><span class="ju-judoc"> represents a valid Sudoku grid</span>
<span class="ju-judoc">    * The size of the encoded solution doesn&#39;t change.</span>
<span class="ju-judoc">    * The number of filled in squares does not decrease.</span>
<span class="ju-judoc">    * The claimed reward is equal to the number of newly filled in squares.</span>
<span class="ju-judoc">    * The only squares that change between the previous and new solutinos</span>
<span class="ju-judoc">    are changes from zero (i.e unfilled) to non-zero (i.e filled).</span>
<span class="ju-judoc"></span> <span class="ju-judoc">--}</span>
<span id="1287"><span class="annot"><a href="Apps.Sudoku-src.html#1287"><span class="annot"><a href="Apps.Sudoku-src.html#1287"><span class="ju-function">checkTransition</span></a></span></a></span></span> <span class="ju-delimiter">{{</span><span class="annot"><a href="Stdlib.Trait.Partial-src.html#521"><span class="ju-inductive">Partial</span></a></span><span class="ju-delimiter">}}</span> <span class="ju-delimiter">(</span><span class="annot"><a href="Apps.Sudoku-src.html#1289"><span class="ju-var">fromResource</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Simulator.Resource-src.html#722"><span class="ju-inductive">Resource</span></a></span><span class="ju-delimiter">)</span> <span class="ju-delimiter">(</span><span class="annot"><a href="Apps.Sudoku-src.html#1290"><span class="ju-var">toResource</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Simulator.Resource-src.html#722"><span class="ju-inductive">Resource</span></a></span><span class="ju-delimiter">)</span> <span class="ju-delimiter">(</span><span class="annot"><a href="Apps.Sudoku-src.html#1291"><span class="ju-var">reward</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Simulator.Resource-src.html#722"><span class="ju-inductive">Resource</span></a></span><span class="ju-delimiter">)</span>
  <span class="ju-keyword">:</span> <span class="annot"><a href="Juvix.Builtin.V1.Bool-src.html#7"><span class="ju-inductive">Bool</span></a></span> <span class="ju-keyword">:=</span>
  <span class="ju-keyword">let</span>
    <span id="1292"><span class="annot"><a href="Apps.Sudoku-src.html#1292"><span class="annot"><a href="Apps.Sudoku-src.html#1292"><span class="ju-function">fromSolution</span></a></span></a></span></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Data.ByteString-src.html#717"><span class="ju-function">ByteString</span></a></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="Simulator.Resource-src.html#726"><span class="ju-function">Resource<span class="ju-delimiter">.</span>dynamicData</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1289"><span class="ju-var">fromResource</span></a></span><span class="ju-delimiter">;</span>
    <span id="1293"><span class="annot"><a href="Apps.Sudoku-src.html#1293"><span class="annot"><a href="Apps.Sudoku-src.html#1293"><span class="ju-function">toSolution</span></a></span></a></span></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Data.ByteString-src.html#717"><span class="ju-function">ByteString</span></a></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="Simulator.Resource-src.html#726"><span class="ju-function">Resource<span class="ju-delimiter">.</span>dynamicData</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1290"><span class="ju-var">toResource</span></a></span><span class="ju-delimiter">;</span>
    <span id="1294"><span class="annot"><a href="Apps.Sudoku-src.html#1294"><span class="annot"><a href="Apps.Sudoku-src.html#1294"><span class="ju-function">rewardQuantity</span></a></span></a></span></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Stdlib.Data.Int.Base-src.html#590"><span class="ju-inductive">Int</span></a></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="Simulator.Resource-src.html#727"><span class="ju-function">Resource<span class="ju-delimiter">.</span>quantity</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1291"><span class="ju-var">reward</span></a></span><span class="ju-delimiter">;</span>
    <span id="1295"><span class="annot"><a href="Apps.Sudoku-src.html#1295"><span class="annot"><a href="Apps.Sudoku-src.html#1295"><span class="ju-function">
    <span class="ju-comment">-- Find the differences between the fromSolution and the toSolution,</span>
    <span class="ju-comment">-- compared index-wise</span>
    diff</span></a></span></a></span></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Juvix.Builtin.V1.List-src.html#116"><span class="ju-inductive">List</span></a></span> <span class="annot"><a href="Juvix.Builtin.V1.Nat.Base-src.html#124"><span class="ju-inductive"><span class="ju-delimiter">(</span>Nat</span></a></span> <span class="annot"><a href="Stdlib.Data.Product.Base-src.html#149"><span class="ju-inductive">Ã—</span></a></span> <span class="annot"><a href="Juvix.Builtin.V1.Nat.Base-src.html#124"><span class="ju-inductive">Nat</span></a></span><span class="ju-delimiter">)</span> <span class="ju-keyword">:=</span>
      <span class="annot"><a href="Stdlib.Data.List.Base-src.html#269"><span class="ju-function">filter</span></a></span> <span id="1297"><span class="annot"><a href="Apps.Sudoku-src.html#1297"><span class="annot"><a href="Apps.Sudoku-src.html#1297"><span class="ju-var"><span class="ju-delimiter">(</span>x</span></a></span></a></span></span><span class="annot"><a href="Stdlib.Data.Product.Base-src.html#150"><span class="ju-constructor">,</span></a></span> <span id="1298"><span class="annot"><a href="Apps.Sudoku-src.html#1298"><span class="annot"><a href="Apps.Sudoku-src.html#1298"><span class="ju-var">y</span></a></span></a></span></span> <span class="ju-keyword">in</span> <span class="annot"><a href="Stdlib.Data.List.Base-src.html#289"><span class="ju-function">zip</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1292"><span class="ju-function">fromSolution</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1293"><span class="ju-function">toSolution</span></a></span><span class="ju-delimiter">)</span>
        <span class="annot"><a href="Apps.Sudoku-src.html#1297"><span class="ju-var">x</span></a></span> <span class="annot"><a href="Stdlib.Trait.Eq-src.html#60"><span class="ju-function">/=</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1298"><span class="ju-var">y</span></a></span><span class="ju-delimiter">;</span>
    <span id="1296"><span class="annot"><a href="Apps.Sudoku-src.html#1296"><span class="annot"><a href="Apps.Sudoku-src.html#1296"><span class="ju-function">
    <span class="ju-comment">-- Check that any solved squares in the toSolution are unsolved in the</span>
    <span class="ju-comment">-- fromSolution</span>
    checkSolvedFromUnsolved</span></a></span></a></span></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Juvix.Builtin.V1.Bool-src.html#7"><span class="ju-inductive">Bool</span></a></span> <span class="ju-keyword">:=</span>
      <span class="annot"><a href="Stdlib.Data.List.Base-src.html#286"><span class="ju-function">all</span></a></span> <span id="1299"><span class="annot"><a href="Apps.Sudoku-src.html#1299"><span class="annot"><a href="Apps.Sudoku-src.html#1299"><span class="ju-var"><span class="ju-delimiter">(</span>consumedSquare</span></a></span></a></span></span><span class="annot"><a href="Stdlib.Data.Product.Base-src.html#150"><span class="ju-constructor">,</span></a></span> <span class="ju-keyword">_</span> <span class="ju-keyword">in</span> <span class="annot"><a href="Apps.Sudoku-src.html#1295"><span class="ju-function">diff</span></a></span><span class="ju-delimiter">)</span>
        <span class="annot"><a href="Stdlib.Data.Bool.Base-src.html#40"><span class="ju-function">not</span></a></span> <span class="annot"><a href="Apps.Sudoku.Validator-src.html#1218"><span class="ju-function"><span class="ju-delimiter">(</span>Sudoku<span class="ju-delimiter">.</span>entryFilled?</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1299"><span class="ju-var">consumedSquare</span></a></span><span class="ju-delimiter">)</span><span class="ju-delimiter">;</span>

  <span class="ju-keyword">in</span> <span class="annot"><a href="Stdlib.Data.List.Base-src.html#270"><span class="ju-function">length</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1293"><span class="ju-function">toSolution</span></a></span> <span class="annot"><a href="Stdlib.Trait.Eq-src.html#59"><span class="ju-function">==</span></a></span> <span class="annot"><a href="Stdlib.Data.List.Base-src.html#270"><span class="ju-function">length</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1292"><span class="ju-function">fromSolution</span></a></span>
    <span class="annot"><a href="Stdlib.Data.Bool.Base-src.html#42"><span class="ju-function">&amp;&amp;</span></a></span> <span class="annot"><a href="Apps.Sudoku.Serializer-src.html#1246"><span class="ju-function">Sudoku<span class="ju-delimiter">.</span>filledSquares</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1293"><span class="ju-function">toSolution</span></a></span> <span class="annot"><a href="Stdlib.Trait.Ord-src.html#84"><span class="ju-function">&gt;=</span></a></span> <span class="annot"><a href="Apps.Sudoku.Serializer-src.html#1246"><span class="ju-function">Sudoku<span class="ju-delimiter">.</span>filledSquares</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1292"><span class="ju-function">fromSolution</span></a></span>
    <span class="annot"><a href="Stdlib.Data.Bool.Base-src.html#42"><span class="ju-function">&amp;&amp;</span></a></span> <span class="annot"><a href="Apps.Sudoku.Validator-src.html#1223"><span class="ju-function">Sudoku<span class="ju-delimiter">.</span>validGrid?</span></a></span> <span class="annot"><a href="Apps.Sudoku.Serializer-src.html#1245"><span class="ju-function"><span class="ju-delimiter">(</span>Sudoku<span class="ju-delimiter">.</span>decode</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1293"><span class="ju-function">toSolution</span></a></span><span class="ju-delimiter">)</span>
    <span class="annot"><a href="Stdlib.Data.Bool.Base-src.html#42"><span class="ju-function">&amp;&amp;</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1296"><span class="ju-function">checkSolvedFromUnsolved</span></a></span>
    <span class="annot"><a href="Stdlib.Data.Bool.Base-src.html#42"><span class="ju-function">&amp;&amp;</span></a></span> <span class="annot"><a href="Stdlib.Data.Int.Base-src.html#591"><span class="ju-constructor">ofNat</span></a></span> <span class="annot"><a href="Stdlib.Data.List.Base-src.html#270"><span class="ju-function"><span class="ju-delimiter">(</span>length</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1295"><span class="ju-function">diff</span></a></span><span class="ju-delimiter">)</span> <span class="annot"><a href="Stdlib.Trait.Eq-src.html#59"><span class="ju-function">==</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1294"><span class="ju-function">rewardQuantity</span></a></span><span class="ju-delimiter">;</span>

<span class="ju-judoc">{--</span> <span class="ju-judoc">The logic function for the Sudoku solution parital transaction.</span>

<span class="ju-judoc">Performs the following check:</span>

<span class="ju-judoc">If there is a consumed </span><span class="ju-judoc">;</span><span class="annot"><a href="Simulator.Resource-src.html#722"><span class="ju-inductive">Resource</span></a></span><span class="ju-judoc">;</span><span class="ju-judoc"> representing a Sudoku puzzle then:</span>

<span class="ju-judoc">1. There is exactly one created </span><span class="ju-judoc">;</span><span class="annot"><a href="Simulator.Resource-src.html#722"><span class="ju-inductive">Resource</span></a></span><span class="ju-judoc">;</span><span class="ju-judoc"> corresponding to a new solution and</span>
<span class="ju-judoc">exactly one created </span><span class="ju-judoc">;</span><span class="annot"><a href="Simulator.Resource-src.html#722"><span class="ju-inductive">Resource</span></a></span><span class="ju-judoc">;</span><span class="ju-judoc"> representing the claimed reward.</span>

<span class="ju-judoc">2. The transition from a Sudoku puzzle to the new solution and reward</span>
<span class="ju-judoc">satisfies the </span><span class="ju-judoc">;</span><span class="annot"><a href="Apps.Sudoku-src.html#1287"><span class="ju-function">checkTransition</span></a></span><span class="ju-judoc">;</span><span class="ju-judoc"> function.</span>

<span class="ju-judoc">If the partial transaction does not consume a Sudoku puzzle then it is</span>
<span class="ju-judoc">vacuously valid.</span>

<span class="ju-judoc">If the logic function part of a </span><span class="ju-judoc">;</span><span class="annot"><a href="Simulator.Resource-src.html#722"><span class="ju-inductive">Resource</span></a></span><span class="ju-judoc">;</span><span class="ju-judoc"> that is created by the partial</span>
<span class="ju-judoc">transaction then it is valid.</span> <span class="ju-judoc">--}</span>
<span id="1288"><span class="annot"><a href="Apps.Sudoku-src.html#1288"><span class="annot"><a href="Apps.Sudoku-src.html#1288"><span class="ju-function">logicFunction</span></a></span></a></span></span> <span class="ju-delimiter">{{</span><span class="annot"><a href="Stdlib.Trait.Partial-src.html#521"><span class="ju-inductive">Partial</span></a></span><span class="ju-delimiter">}}</span> <span class="ju-keyword">:</span> <span class="annot"><a href="Apps.Sudoku-src.html#1273"><span class="ju-inductive">Sudoku<span class="ju-delimiter">.</span>Puzzle</span></a></span> <span class="ju-keyword">-&gt;</span> <span class="annot"><a href="Simulator.PartialTx-src.html#776"><span class="ju-function">LogicFunction</span></a></span>
  <span class="ju-keyword">|</span> <span id="1300"><span class="annot"><a href="Apps.Sudoku-src.html#1300"><span class="annot"><a href="Apps.Sudoku-src.html#1300"><span class="ju-var">data</span></a></span></a></span></span> <span id="1301"><span class="annot"><a href="Apps.Sudoku-src.html#1301"><span class="annot"><a href="Apps.Sudoku-src.html#1301"><span class="ju-var">kind</span></a></span></a></span></span> <span id="1302"><span class="annot"><a href="Apps.Sudoku-src.html#1302"><span class="annot"><a href="Apps.Sudoku-src.html#1302"><span class="ju-var">tx</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
    <span class="ju-keyword">let</span>
      <span id="1303"><span class="annot"><a href="Apps.Sudoku-src.html#1303"><span class="annot"><a href="Apps.Sudoku-src.html#1303"><span class="ju-function">puzzleDenom</span></a></span></a></span></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Simulator.Kind-src.html#721"><span class="ju-function">Kind</span></a></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="Apps.Sudoku-src.html#1279"><span class="ju-function">Sudoku<span class="ju-delimiter">.</span>kind</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1300"><span class="ju-var">data</span></a></span><span class="ju-delimiter">;</span>
      <span id="1304"><span class="annot"><a href="Apps.Sudoku-src.html#1304"><span class="annot"><a href="Apps.Sudoku-src.html#1304"><span class="ju-function">fromResources</span></a></span></a></span></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Juvix.Builtin.V1.List-src.html#116"><span class="ju-inductive">List</span></a></span> <span class="annot"><a href="Simulator.Resource-src.html#722"><span class="ju-inductive">Resource</span></a></span> <span class="ju-keyword">:=</span>
        <span class="annot"><a href="Simulator.Resource-src.html#735"><span class="ju-function">resourcesForKind</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1303"><span class="ju-function">puzzleDenom</span></a></span> <span class="annot"><a href="Simulator.PartialTx-src.html#774"><span class="ju-function"><span class="ju-delimiter">(</span>consumedResources</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1302"><span class="ju-var">tx</span></a></span><span class="ju-delimiter">)</span><span class="ju-delimiter">;</span>
      <span id="1305"><span class="annot"><a href="Apps.Sudoku-src.html#1305"><span class="annot"><a href="Apps.Sudoku-src.html#1305"><span class="ju-function">toResources</span></a></span></a></span></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Juvix.Builtin.V1.List-src.html#116"><span class="ju-inductive">List</span></a></span> <span class="annot"><a href="Simulator.Resource-src.html#722"><span class="ju-inductive">Resource</span></a></span> <span class="ju-keyword">:=</span>
        <span class="annot"><a href="Simulator.Resource-src.html#735"><span class="ju-function">resourcesForKind</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1303"><span class="ju-function">puzzleDenom</span></a></span> <span class="annot"><a href="Simulator.PartialTx-src.html#775"><span class="ju-function"><span class="ju-delimiter">(</span>createdResources</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1302"><span class="ju-var">tx</span></a></span><span class="ju-delimiter">)</span><span class="ju-delimiter">;</span>
      <span id="1306"><span class="annot"><a href="Apps.Sudoku-src.html#1306"><span class="annot"><a href="Apps.Sudoku-src.html#1306"><span class="ju-function">rewardResources</span></a></span></a></span></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Juvix.Builtin.V1.List-src.html#116"><span class="ju-inductive">List</span></a></span> <span class="annot"><a href="Simulator.Resource-src.html#722"><span class="ju-inductive">Resource</span></a></span> <span class="ju-keyword">:=</span>
        <span class="annot"><a href="Simulator.Resource-src.html#735"><span class="ju-function">resourcesForKind</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1270"><span class="ju-function">Reward<span class="ju-delimiter">.</span>kind</span></a></span> <span class="annot"><a href="Simulator.PartialTx-src.html#775"><span class="ju-function"><span class="ju-delimiter">(</span>createdResources</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1302"><span class="ju-var">tx</span></a></span><span class="ju-delimiter">)</span><span class="ju-delimiter">;</span>
    <span class="ju-keyword">in</span> <span class="annot"><a href="Simulator.Resource-src.html#744"><span class="ju-function">isCreated</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1301"><span class="ju-var">kind</span></a></span>
      <span class="annot"><a href="Stdlib.Data.Bool.Base-src.html#41"><span class="ju-function">||</span></a></span> <span class="ju-keyword">case</span> <span class="annot"><a href="Apps.Sudoku-src.html#1304"><span class="ju-function">fromResources</span></a></span><span class="annot"><a href="Stdlib.Data.Product.Base-src.html#150"><span class="ju-constructor">,</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1305"><span class="ju-function">toResources</span></a></span><span class="annot"><a href="Stdlib.Data.Product.Base-src.html#150"><span class="ju-constructor">,</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1306"><span class="ju-function">rewardResources</span></a></span> <span class="ju-keyword">of</span> <span class="ju-delimiter">{</span>
           <span class="ju-keyword">|</span> <span class="annot"><a href="Juvix.Builtin.V1.List-src.html#117"><span class="ju-constructor">nil</span></a></span><span class="annot"><a href="Stdlib.Data.Product.Base-src.html#150"><span class="ju-constructor">,</span></a></span> <span class="ju-keyword">_</span><span class="annot"><a href="Stdlib.Data.Product.Base-src.html#150"><span class="ju-constructor">,</span></a></span> <span class="ju-keyword">_</span> <span class="ju-keyword">:=</span> <span class="annot"><a href="Juvix.Builtin.V1.Bool-src.html#8"><span class="ju-constructor">true</span></a></span>
           <span class="ju-keyword">|</span> <span class="ju-keyword">[</span><span id="1307"><span class="annot"><a href="Apps.Sudoku-src.html#1307"><span class="annot"><a href="Apps.Sudoku-src.html#1307"><span class="ju-var">fromResource</span></a></span></a></span></span><span class="ju-keyword">]</span><span class="annot"><a href="Stdlib.Data.Product.Base-src.html#150"><span class="ju-constructor">,</span></a></span> <span class="ju-keyword">[</span><span id="1308"><span class="annot"><a href="Apps.Sudoku-src.html#1308"><span class="annot"><a href="Apps.Sudoku-src.html#1308"><span class="ju-var">toResource</span></a></span></a></span></span><span class="ju-keyword">]</span><span class="annot"><a href="Stdlib.Data.Product.Base-src.html#150"><span class="ju-constructor">,</span></a></span> <span class="ju-keyword">[</span><span id="1309"><span class="annot"><a href="Apps.Sudoku-src.html#1309"><span class="annot"><a href="Apps.Sudoku-src.html#1309"><span class="ju-var">reward</span></a></span></a></span></span><span class="ju-keyword">]</span> <span class="ju-keyword">:=</span>
             <span class="annot"><a href="Apps.Sudoku-src.html#1287"><span class="ju-function">checkTransition</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1307"><span class="ju-var">fromResource</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1308"><span class="ju-var">toResource</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1309"><span class="ju-var">reward</span></a></span>
           <span class="ju-keyword">|</span> <span class="ju-keyword">_</span><span class="annot"><a href="Stdlib.Data.Product.Base-src.html#150"><span class="ju-constructor">,</span></a></span> <span class="ju-keyword">_</span><span class="annot"><a href="Stdlib.Data.Product.Base-src.html#150"><span class="ju-constructor">,</span></a></span> <span class="ju-keyword">_</span> <span class="ju-keyword">:=</span> <span class="annot"><a href="Juvix.Builtin.V1.Bool-src.html#9"><span class="ju-constructor">false</span></a></span>
         <span class="ju-delimiter">}</span><span class="ju-delimiter">;</span>

<span class="ju-comment">-- Definitions relating to the Dealer participant in the application</span>
<span class="ju-keyword">module</span> <span id="1325"><span class="annot"><a href="Apps.Sudoku-src.html#1325"><span class="annot"><a href="Apps.Sudoku-src.html#1325"><span class="ju-var">Dealer</span></a></span></a></span></span><span class="ju-delimiter">;</span>
  <span class="ju-judoc">{--</span> <span class="ju-judoc">The logic function for the Sudoku dealer parital transaction.</span>

  <span class="ju-judoc">Performs the following check:</span>

  <span class="ju-judoc">If there is exactly one consumed </span><span class="ju-judoc">;</span><span class="annot"><a href="Simulator.Resource-src.html#722"><span class="ju-inductive">Resource</span></a></span><span class="ju-judoc">;</span><span class="ju-judoc"> representing a Sudoku puzzle then:</span>

  <span class="ju-judoc">1. The solution matches the Dealer&#39;s solution.</span>

  <span class="ju-judoc">If the partial transaction does not consume a Sudoku puzzle then it is vacuously valid.</span>

  <span class="ju-judoc">If the logic function part of a </span><span class="ju-judoc">;</span><span class="annot"><a href="Simulator.Resource-src.html#722"><span class="ju-inductive">Resource</span></a></span><span class="ju-judoc">;</span><span class="ju-judoc"> that is created by the partial transaction then it is valid.</span>
  <span class="ju-judoc"></span> <span class="ju-judoc">--}</span>
  <span id="1310"><span class="annot"><a href="Apps.Sudoku-src.html#1310"><span class="annot"><a href="Apps.Sudoku-src.html#1310"><span class="ju-function">
  logicFunction</span></a></span></a></span></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Apps.Sudoku-src.html#1273"><span class="ju-inductive">Sudoku<span class="ju-delimiter">.</span>Puzzle</span></a></span> <span class="ju-keyword">-&gt;</span> <span class="annot"><a href="Simulator.PartialTx-src.html#776"><span class="ju-function">LogicFunction</span></a></span>
    <span class="ju-keyword">|</span> <span id="1315"><span class="annot"><a href="Apps.Sudoku-src.html#1315"><span class="annot"><a href="Apps.Sudoku-src.html#1315"><span class="ju-var">p</span></a></span></a></span></span> <span id="1316"><span class="annot"><a href="Apps.Sudoku-src.html#1316"><span class="annot"><a href="Apps.Sudoku-src.html#1316"><span class="ju-var">kind</span></a></span></a></span></span> <span id="1317"><span class="annot"><a href="Apps.Sudoku-src.html#1317"><span class="annot"><a href="Apps.Sudoku-src.html#1317"><span class="ju-var">tx</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
      <span class="ju-keyword">let</span>
        <span id="1318"><span class="annot"><a href="Apps.Sudoku-src.html#1318"><span class="annot"><a href="Apps.Sudoku-src.html#1318"><span class="ju-function">puzzleResources</span></a></span></a></span></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Juvix.Builtin.V1.List-src.html#116"><span class="ju-inductive">List</span></a></span> <span class="annot"><a href="Simulator.Resource-src.html#722"><span class="ju-inductive">Resource</span></a></span> <span class="ju-keyword">:=</span>
          <span class="annot"><a href="Simulator.Resource-src.html#735"><span class="ju-function">resourcesForKind</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1279"><span class="ju-function"><span class="ju-delimiter">(</span>Sudoku<span class="ju-delimiter">.</span>kind</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1315"><span class="ju-var">p</span></a></span><span class="ju-delimiter">)</span> <span class="annot"><a href="Simulator.PartialTx-src.html#775"><span class="ju-function"><span class="ju-delimiter">(</span>createdResources</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1317"><span class="ju-var">tx</span></a></span><span class="ju-delimiter">)</span><span class="ju-delimiter">;</span>
        <span id="1319"><span class="annot"><a href="Apps.Sudoku-src.html#1319"><span class="annot"><a href="Apps.Sudoku-src.html#1319"><span class="ju-function">
        checkPuzzle</span></a></span></a></span></span> <span class="ju-delimiter">(</span><span class="annot"><a href="Apps.Sudoku-src.html#1320"><span class="ju-var">r</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Simulator.Resource-src.html#722"><span class="ju-inductive">Resource</span></a></span><span class="ju-delimiter">)</span> <span class="ju-keyword">:</span> <span class="annot"><a href="Juvix.Builtin.V1.Bool-src.html#7"><span class="ju-inductive">Bool</span></a></span> <span class="ju-keyword">:=</span>
          <span class="annot"><a href="Stdlib.Trait.Eq-src.html#57"><span class="ju-function">Eq<span class="ju-delimiter">.</span>eq</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1276"><span class="ju-function"><span class="ju-delimiter">(</span>Sudoku<span class="ju-delimiter">.</span>Puzzle<span class="ju-delimiter">.</span>solution</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1315"><span class="ju-var">p</span></a></span><span class="ju-delimiter">)</span> <span class="annot"><a href="Simulator.Resource-src.html#726"><span class="ju-function"><span class="ju-delimiter">(</span>Resource<span class="ju-delimiter">.</span>dynamicData</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1320"><span class="ju-var">r</span></a></span><span class="ju-delimiter">)</span><span class="ju-delimiter">;</span>
      <span class="ju-keyword">in</span> <span class="annot"><a href="Simulator.Resource-src.html#744"><span class="ju-function">isCreated</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1316"><span class="ju-var">kind</span></a></span>
        <span class="annot"><a href="Stdlib.Data.Bool.Base-src.html#41"><span class="ju-function">||</span></a></span> <span class="ju-keyword">case</span> <span class="annot"><a href="Apps.Sudoku-src.html#1318"><span class="ju-function">puzzleResources</span></a></span> <span class="ju-keyword">of</span> <span class="ju-delimiter">{</span>
             <span class="ju-keyword">|</span> <span class="annot"><a href="Juvix.Builtin.V1.List-src.html#117"><span class="ju-constructor">nil</span></a></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="Juvix.Builtin.V1.Bool-src.html#8"><span class="ju-constructor">true</span></a></span>
             <span class="ju-keyword">|</span> <span class="ju-keyword">[</span><span id="1321"><span class="annot"><a href="Apps.Sudoku-src.html#1321"><span class="annot"><a href="Apps.Sudoku-src.html#1321"><span class="ju-var">puzzleResource</span></a></span></a></span></span><span class="ju-keyword">]</span> <span class="ju-keyword">:=</span> <span class="annot"><a href="Apps.Sudoku-src.html#1319"><span class="ju-function">checkPuzzle</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1321"><span class="ju-var">puzzleResource</span></a></span>
             <span class="ju-keyword">|</span> <span class="ju-keyword">_</span> <span class="ju-keyword">:=</span> <span class="annot"><a href="Juvix.Builtin.V1.Bool-src.html#9"><span class="ju-constructor">false</span></a></span>
           <span class="ju-delimiter">}</span><span class="ju-delimiter">;</span>
  <span id="1311"><span class="annot"><a href="Apps.Sudoku-src.html#1311"><span class="annot"><a href="Apps.Sudoku-src.html#1311"><span class="ju-function">
  logicHash</span></a></span></a></span></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Apps.Sudoku-src.html#1273"><span class="ju-inductive">Sudoku<span class="ju-delimiter">.</span>Puzzle</span></a></span> <span class="ju-keyword">-&gt;</span> <span class="annot"><a href="Simulator.Kind-src.html#720"><span class="ju-inductive">LogicHash</span></a></span>
    <span class="ju-keyword">|</span> <span class="ju-keyword">_</span> <span class="ju-keyword">:=</span> <span class="ju-number">2</span><span class="ju-delimiter">;</span>
  <span id="1312"><span class="annot"><a href="Apps.Sudoku-src.html#1312"><span class="annot"><a href="Apps.Sudoku-src.html#1312"><span class="ju-function">
  label</span></a></span></a></span></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Apps.Sudoku-src.html#1273"><span class="ju-inductive">Sudoku<span class="ju-delimiter">.</span>Puzzle</span></a></span> <span class="ju-keyword">-&gt;</span> <span class="annot"><a href="Data.ByteString-src.html#717"><span class="ju-function">ByteString</span></a></span>
    <span class="ju-keyword">|</span> <span class="ju-keyword">_</span> <span class="ju-keyword">:=</span> <span class="ju-keyword">[</span><span class="ju-number">2</span><span class="ju-keyword">]</span><span class="ju-delimiter">;</span>
  <span id="1313"><span class="annot"><a href="Apps.Sudoku-src.html#1313"><span class="annot"><a href="Apps.Sudoku-src.html#1313"><span class="ju-function">
  kind</span></a></span></a></span></span> <span class="ju-delimiter">(</span><span class="annot"><a href="Apps.Sudoku-src.html#1322"><span class="ju-var">d</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Apps.Sudoku-src.html#1273"><span class="ju-inductive">Sudoku<span class="ju-delimiter">.</span>Puzzle</span></a></span><span class="ju-delimiter">)</span> <span class="ju-keyword">:</span> <span class="annot"><a href="Simulator.Kind-src.html#721"><span class="ju-function">Kind</span></a></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="Apps.Sudoku-src.html#1311"><span class="ju-function">logicHash</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1322"><span class="ju-var">d</span></a></span> <span class="annot"><a href="Juvix.Builtin.V1.List-src.html#118"><span class="ju-constructor">::</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1312"><span class="ju-function">label</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1322"><span class="ju-var">d</span></a></span><span class="ju-delimiter">;</span>
  <span id="1314"><span class="annot"><a href="Apps.Sudoku-src.html#1314"><span class="annot"><a href="Apps.Sudoku-src.html#1314"><span class="ju-function">
  mkResource</span></a></span></a></span></span> <span class="ju-delimiter">(</span><span class="annot"><a href="Apps.Sudoku-src.html#1323"><span class="ju-var">d</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Apps.Sudoku-src.html#1273"><span class="ju-inductive">Sudoku<span class="ju-delimiter">.</span>Puzzle</span></a></span><span class="ju-delimiter">)</span> <span class="ju-delimiter">(</span><span class="annot"><a href="Apps.Sudoku-src.html#1324"><span class="ju-var">n</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Stdlib.Data.Int.Base-src.html#590"><span class="ju-inductive">Int</span></a></span><span class="ju-delimiter">)</span> <span class="ju-keyword">:</span> <span class="annot"><a href="Simulator.Resource-src.html#722"><span class="ju-inductive">Resource</span></a></span> <span class="ju-keyword">:=</span>
    <span class="annot"><a href="Simulator.Resource-src.html#723"><span class="ju-constructor">mkResource&#39;</span></a></span>
      <span class="ju-delimiter">(</span>logicHash <span class="ju-keyword">:=</span> <span class="annot"><a href="Apps.Sudoku-src.html#1311"><span class="ju-function">logicHash</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1323"><span class="ju-var">d</span></a></span><span class="ju-delimiter">;</span>
      label <span class="ju-keyword">:=</span> <span class="annot"><a href="Apps.Sudoku-src.html#1312"><span class="ju-function">label</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1323"><span class="ju-var">d</span></a></span><span class="ju-delimiter">;</span>
      dynamicData <span class="ju-keyword">:=</span> <span class="annot"><a href="Juvix.Builtin.V1.List-src.html#117"><span class="ju-constructor">nil</span></a></span><span class="ju-delimiter">;</span>
      quantity <span class="ju-keyword">:=</span> <span class="annot"><a href="Apps.Sudoku-src.html#1324"><span class="ju-var">n</span></a></span><span class="ju-delimiter">)</span><span class="ju-delimiter">;</span>
<span class="ju-keyword">end</span><span class="ju-delimiter">;</span>
<span id="1326"><span class="annot"><a href="Apps.Sudoku-src.html#1326"><span class="annot"><a href="Apps.Sudoku-src.html#1326"><span class="ju-function">
dealer</span></a></span></a></span></span> <span class="ju-delimiter">(</span><span class="annot"><a href="Apps.Sudoku-src.html#1328"><span class="ju-var">puzzle</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Apps.Sudoku-src.html#1273"><span class="ju-inductive">Sudoku<span class="ju-delimiter">.</span>Puzzle</span></a></span><span class="ju-delimiter">)</span> <span class="ju-delimiter">(</span><span class="annot"><a href="Apps.Sudoku-src.html#1329"><span class="ju-var">initialBoard</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Data.ByteString-src.html#717"><span class="ju-function">ByteString</span></a></span><span class="ju-delimiter">)</span> <span class="ju-keyword">:</span> <span class="annot"><a href="Simulator.PartialTx-src.html#767"><span class="ju-inductive">PartialTx</span></a></span> <span class="ju-keyword">:=</span>
  <span class="annot"><a href="Simulator.PartialTx-src.html#768"><span class="ju-constructor">mkPartialTx</span></a></span>
    <span class="ju-delimiter">(</span>consumedPair <span class="ju-keyword">:=</span> <span class="annot"><a href="Apps.Sudoku-src.html#1269"><span class="ju-function">Reward<span class="ju-delimiter">.</span>mkResource</span></a></span>
        <span class="annot"><a href="Stdlib.Data.Int.Base-src.html#591"><span class="ju-constructor"><span class="ju-delimiter">(</span>ofNat</span></a></span> <span class="annot"><a href="Apps.Sudoku.Serializer-src.html#1247"><span class="ju-function"><span class="ju-delimiter">(</span>Sudoku<span class="ju-delimiter">.</span>emptySquares</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1329"><span class="ju-var">initialBoard</span></a></span><span class="ju-delimiter">)</span><span class="ju-delimiter">)</span>
      <span class="annot"><a href="Stdlib.Data.Product.Base-src.html#150"><span class="ju-constructor">,</span></a></span> <span class="annot"><a href="Simulator.BuiltinResources-src.html#1099"><span class="ju-function">dummyResource</span></a></span><span class="ju-delimiter">;</span>
    createdPair <span class="ju-keyword">:=</span> <span class="annot"><a href="Apps.Sudoku-src.html#1314"><span class="ju-function">Dealer<span class="ju-delimiter">.</span>mkResource</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1328"><span class="ju-var">puzzle</span></a></span> <span class="ju-number">1</span>
      <span class="annot"><a href="Stdlib.Data.Product.Base-src.html#150"><span class="ju-constructor">,</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1278"><span class="ju-function">Sudoku<span class="ju-delimiter">.</span>mkResource</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1328"><span class="ju-var">puzzle</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1329"><span class="ju-var">initialBoard</span></a></span> <span class="ju-number">1</span><span class="ju-delimiter">)</span><span class="ju-delimiter">;</span>
<span id="1327"><span class="annot"><a href="Apps.Sudoku-src.html#1327"><span class="annot"><a href="Apps.Sudoku-src.html#1327"><span class="ju-function">
logicFunctions</span></a></span></a></span></span> <span class="ju-delimiter">{{</span><span class="annot"><a href="Stdlib.Trait.Partial-src.html#521"><span class="ju-inductive">Partial</span></a></span><span class="ju-delimiter">}}</span> <span class="ju-delimiter">(</span><span class="annot"><a href="Apps.Sudoku-src.html#1330"><span class="ju-var">puzzle</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Apps.Sudoku-src.html#1273"><span class="ju-inductive">Sudoku<span class="ju-delimiter">.</span>Puzzle</span></a></span><span class="ju-delimiter">)</span>
  <span class="ju-keyword">:</span> <span class="annot"><a href="Data.Map-src.html#1026"><span class="ju-inductive">Map</span></a></span> <span class="annot"><a href="Simulator.Kind-src.html#720"><span class="ju-inductive">LogicHash</span></a></span> <span class="annot"><a href="Simulator.PartialTx-src.html#776"><span class="ju-function">LogicFunction</span></a></span> <span class="ju-keyword">:=</span>
  <span class="annot"><a href="Simulator.BuiltinResources-src.html#1100"><span class="ju-function">mkLogicFunctionMap</span></a></span>
    <span class="ju-keyword">[</span> <span class="annot"><a href="Apps.Sudoku-src.html#1275"><span class="ju-function">Sudoku<span class="ju-delimiter">.</span>Puzzle<span class="ju-delimiter">.</span>logicHash</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1330"><span class="ju-var">puzzle</span></a></span><span class="annot"><a href="Stdlib.Data.Product.Base-src.html#150"><span class="ju-constructor">,</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1288"><span class="ju-function">logicFunction</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1330"><span class="ju-var">puzzle</span></a></span>
    <span class="ju-delimiter">;</span> <span class="annot"><a href="Apps.Sudoku-src.html#1311"><span class="ju-function">Dealer<span class="ju-delimiter">.</span>logicHash</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1330"><span class="ju-var">puzzle</span></a></span><span class="annot"><a href="Stdlib.Data.Product.Base-src.html#150"><span class="ju-constructor">,</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1310"><span class="ju-function">Dealer<span class="ju-delimiter">.</span>logicFunction</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1330"><span class="ju-var">puzzle</span></a></span>
    <span class="ju-keyword">]</span><span class="ju-delimiter">;</span>
</pre><footer><pre>Powered by <a href="https://juvix.org">Juvix </a><a href="https://github.com/anoma/juvix/commit/9f8c26d">0.5.5-9f8c26d</a></pre></footer><span>Last modified on 2023-12-05 11:40 UTC</span></html>