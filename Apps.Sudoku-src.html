<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml"><meta charset="UTF-8"><link href="assets/css/source-ayu-light.css" rel="stylesheet" type="text/css"><script src="assets/js/highlight.js" type="text/javascript"></script><div id="package-header"><span class="caption"></span></div><pre id="src-content"><span class="ju-judoc">{--</span> <span class="ju-judoc">A Sudoku puzzle application</span>

<span class="ju-judoc">To start an instance of the application a Dealer publishes a partial</span>
<span class="ju-judoc"> transaction which creates two </span><span class="ju-judoc">;</span><span class="annot"><a href="Simulator.Resource-src.html#657"><span class="ju-inductive">Resource</span></a></span><span class="ju-judoc">;</span><span class="ju-judoc">s:</span>

<span class="ju-judoc">1.1 A Sudoku </span><span class="ju-judoc">;</span><span class="annot"><a href="Simulator.Resource-src.html#657"><span class="ju-inductive">Resource</span></a></span><span class="ju-judoc">;</span><span class="ju-judoc"> that contains the initial state of the puzzle.</span>

<span class="ju-judoc">1.2 A </span><span class="ju-judoc">;</span><span class="annot"><a href="Simulator.Resource-src.html#657"><span class="ju-inductive">Resource</span></a></span><span class="ju-judoc">;</span><span class="ju-judoc"> containing a logic function that checks the completed</span>
<span class="ju-judoc"> solution to the puzzle.</span>

<span class="ju-judoc">And consumes another resource:</span>

<span class="ju-judoc">2.1 A Reward </span><span class="ju-judoc">;</span><span class="annot"><a href="Simulator.Resource-src.html#657"><span class="ju-inductive">Resource</span></a></span><span class="ju-judoc">;</span><span class="ju-judoc"> with quantity equal to the number of unfilled</span>
<span class="ju-judoc"> squares in the puzzle.</span>

<span class="ju-judoc">Participants publish partial transactions which consume:</span>

<span class="ju-judoc">3.1 A Sudoku </span><span class="ju-judoc">;</span><span class="annot"><a href="Simulator.Resource-src.html#657"><span class="ju-inductive">Resource</span></a></span><span class="ju-judoc">;</span><span class="ju-judoc"> which represents the current parital solution to the puzzle.</span>

<span class="ju-judoc">And create:</span>

<span class="ju-judoc">3.2. A Reward </span><span class="ju-judoc">;</span><span class="annot"><a href="Simulator.Resource-src.html#657"><span class="ju-inductive">Resource</span></a></span><span class="ju-judoc">;</span><span class="ju-judoc"> with quantity equal to the number of squares that the participant fills in on the Sudoku grid.</span>

<span class="ju-judoc">3.3. A Sudoku </span><span class="ju-judoc">;</span><span class="annot"><a href="Simulator.Resource-src.html#657"><span class="ju-inductive">Resource</span></a></span><span class="ju-judoc">;</span><span class="ju-judoc"> that contains an updated Sudoku grid with their solutions filled in.</span>

<span class="ju-judoc">In the partial transaction which contains a full solution to the puzzle, the</span>
<span class="ju-judoc"> participant additionally consumes the </span><span class="ju-judoc">;</span><span class="annot"><a href="Simulator.Resource-src.html#657"><span class="ju-inductive">Resource</span></a></span><span class="ju-judoc">;</span><span class="ju-judoc"> containing the Dealer&#39;s</span>
<span class="ju-judoc"> logic function which was created in 1.2.</span> <span class="ju-judoc">--}</span>
<span class="ju-keyword">module</span> <span id="0"><span class="annot"><a href="Apps.Sudoku-src.html#0"><span class="annot"><a href="Apps.Sudoku-src.html#0"><span class="ju-var">Apps<span class="ju-delimiter">.</span>Sudoku</span></a></span></a></span></span><span class="ju-delimiter">;</span>

<span class="ju-keyword">import</span> <span class="annot"><a href="Simulator-src.html#1"><span class="ju-var">Simulator</span></a></span> <span class="ju-keyword">open</span><span class="ju-delimiter">;</span>
<span class="ju-keyword">import</span> <span class="annot"><a href="Simulator.Resource-src.html#2"><span class="ju-var">Simulator<span class="ju-delimiter">.</span>Resource</span></a></span> <span class="ju-keyword">open</span> <span class="ju-keyword">using</span> <span class="ju-delimiter">{</span><span class="annot"><a href="Simulator.Resource-src.html#658"><span class="ju-constructor">mkResource</span></a></span> <span class="ju-keyword">as</span> <span class="annot"><a href="Simulator.Resource-src.html#658"><span class="ju-constructor">mkResource&#39;</span></a></span><span class="ju-delimiter">}</span><span class="ju-delimiter">;</span>

<span class="ju-keyword">import</span> <span class="annot"><a href="Apps.Sudoku.Validator-src.html#1114"><span class="ju-var">Apps<span class="ju-delimiter">.</span>Sudoku<span class="ju-delimiter">.</span>Validator</span></a></span> <span class="ju-keyword">as</span> <span id="1114"><span class="annot"><a href="Apps.Sudoku.Validator-src.html#1114"><span class="annot"><a href="Apps.Sudoku.Validator-src.html#1114"><span class="ju-var">Sudoku</span></a></span></a></span></span><span class="ju-delimiter">;</span>
<span class="ju-keyword">import</span> <span class="annot"><a href="Apps.Sudoku.Serializer-src.html#1213"><span class="ju-var">Apps<span class="ju-delimiter">.</span>Sudoku<span class="ju-delimiter">.</span>Serializer</span></a></span> <span class="ju-keyword">as</span> <span id="1213"><span class="annot"><a href="Apps.Sudoku.Serializer-src.html#1213"><span class="annot"><a href="Apps.Sudoku.Serializer-src.html#1213"><span class="ju-var">Sudoku</span></a></span></a></span></span><span class="ju-delimiter">;</span>

<span class="ju-keyword">import</span> <span class="annot"><a href="Simulator.Denomination-src.html#654"><span class="ju-var">Simulator<span class="ju-delimiter">.</span>Denomination</span></a></span> <span class="ju-keyword">as</span> <span id="654"><span class="annot"><a href="Simulator.Denomination-src.html#654"><span class="annot"><a href="Simulator.Denomination-src.html#654"><span class="ju-var">D</span></a></span></a></span></span><span class="ju-delimiter">;</span>

<span class="ju-keyword">import</span> <span class="annot"><a href="Data.Map-src.html#722"><span class="ju-var">Data<span class="ju-delimiter">.</span>Map</span></a></span> <span class="ju-keyword">as</span> <span id="722"><span class="annot"><a href="Data.Map-src.html#722"><span class="annot"><a href="Data.Map-src.html#722"><span class="ju-var">Map</span></a></span></a></span></span><span class="ju-delimiter">;</span>
<span class="ju-keyword">open</span> <span class="annot"><a href="Data.Map-src.html#722"><span class="ju-var">Map</span></a></span> <span class="ju-keyword">using</span> <span class="ju-delimiter">{</span><span class="annot"><a href="Data.Map-src.html#998"><span class="ju-inductive">Map</span></a></span><span class="ju-delimiter">}</span><span class="ju-delimiter">;</span>

<span class="ju-keyword">import</span> <span class="annot"><a href="Stdlib.Prelude-src.html#3"><span class="ju-var">Stdlib<span class="ju-delimiter">.</span>Prelude</span></a></span> <span class="ju-keyword">open</span><span class="ju-delimiter">;</span>
<span class="ju-keyword">import</span> <span class="annot"><a href="Stdlib.Data.Int.Ord-src.html#563"><span class="ju-var">Stdlib<span class="ju-delimiter">.</span>Data<span class="ju-delimiter">.</span>Int<span class="ju-delimiter">.</span>Ord</span></a></span> <span class="ju-keyword">open</span><span class="ju-delimiter">;</span>

<span class="ju-keyword">import</span> <span class="annot"><a href="Stdlib.Data.Nat.Ord-src.html#462"><span class="ju-var">Stdlib<span class="ju-delimiter">.</span>Data<span class="ju-delimiter">.</span>Nat<span class="ju-delimiter">.</span>Ord</span></a></span> <span class="ju-keyword">as</span> <span id="462"><span class="annot"><a href="Stdlib.Data.Nat.Ord-src.html#462"><span class="annot"><a href="Stdlib.Data.Nat.Ord-src.html#462"><span class="ju-var">Nat</span></a></span></a></span></span><span class="ju-delimiter">;</span>

<span class="ju-keyword">module</span> <span id="1244"><span class="annot"><a href="Apps.Sudoku-src.html#1244"><span class="annot"><a href="Apps.Sudoku-src.html#1244"><span class="ju-var">Reward</span></a></span></a></span></span><span class="ju-delimiter">;</span>
  <span id="1240"><span class="annot"><a href="Apps.Sudoku-src.html#1240"><span class="annot"><a href="Apps.Sudoku-src.html#1240"><span class="ju-function">staticData</span></a></span></a></span></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Data.ByteString-src.html#652"><span class="ju-function">ByteString</span></a></span> <span class="ju-keyword">:=</span> <span class="ju-number">0</span> <span class="annot"><a href="Stdlib.Data.List.Base-src.html#218"><span class="ju-constructor">::</span></a></span> <span class="annot"><a href="Stdlib.Data.List.Base-src.html#217"><span class="ju-constructor">nil</span></a></span><span class="ju-delimiter">;</span>
  <span id="1241"><span class="annot"><a href="Apps.Sudoku-src.html#1241"><span class="annot"><a href="Apps.Sudoku-src.html#1241"><span class="ju-function">
  mkResource</span></a></span></a></span></span> <span class="ju-delimiter">(</span><span class="annot"><a href="Apps.Sudoku-src.html#1243"><span class="ju-var">n</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Stdlib.Data.Int.Base-src.html#497"><span class="ju-inductive">Int</span></a></span><span class="ju-delimiter">)</span> <span class="ju-keyword">:</span> <span class="annot"><a href="Simulator.Resource-src.html#657"><span class="ju-inductive">Resource</span></a></span> <span class="ju-keyword">:=</span>
    <span class="annot"><a href="Simulator.Resource-src.html#658"><span class="ju-constructor">mkResource&#39;</span></a></span>
      <span class="ju-delimiter">(</span>logicHash <span class="ju-keyword">:=</span> <span class="annot"><a href="Simulator.BuiltinResources-src.html#1069"><span class="ju-function">AlwaysValid<span class="ju-delimiter">.</span>logicHash</span></a></span><span class="ju-delimiter">;</span>
      staticData <span class="ju-keyword">:=</span> <span class="annot"><a href="Apps.Sudoku-src.html#1240"><span class="ju-function">staticData</span></a></span><span class="ju-delimiter">;</span>
      dynamicData <span class="ju-keyword">:=</span> <span class="annot"><a href="Stdlib.Data.List.Base-src.html#217"><span class="ju-constructor">nil</span></a></span><span class="ju-delimiter">;</span>
      quantity <span class="ju-keyword">:=</span> <span class="annot"><a href="Apps.Sudoku-src.html#1243"><span class="ju-var">n</span></a></span><span class="ju-delimiter">)</span><span class="ju-delimiter">;</span>
  <span id="1242"><span class="annot"><a href="Apps.Sudoku-src.html#1242"><span class="annot"><a href="Apps.Sudoku-src.html#1242"><span class="ju-function">
  denomination</span></a></span></a></span></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Simulator.Denomination-src.html#656"><span class="ju-function">Denomination</span></a></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="Simulator.BuiltinResources-src.html#1069"><span class="ju-function">AlwaysValid<span class="ju-delimiter">.</span>logicHash</span></a></span> <span class="annot"><a href="Stdlib.Data.List.Base-src.html#218"><span class="ju-constructor">::</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1240"><span class="ju-function">staticData</span></a></span><span class="ju-delimiter">;</span>
<span class="ju-keyword">end</span><span class="ju-delimiter">;</span>

<span class="ju-judoc">---</span> <span class="ju-judoc">Definitions related to the Sudoku </span><span class="ju-judoc">;</span><span class="annot"><a href="Simulator.Resource-src.html#657"><span class="ju-inductive">Resource</span></a></span><span class="ju-judoc">;</span><span class="ju-judoc"> in the application</span>
<span class="ju-keyword">module</span> <span id="1258"><span class="annot"><a href="Apps.Sudoku-src.html#1258"><span class="annot"><a href="Apps.Sudoku-src.html#1258"><span class="ju-var">Sudoku</span></a></span></a></span></span><span class="ju-delimiter">;</span>
  
  <span class="ju-keyword">type</span> <span id="1245"><span class="annot"><a href="Apps.Sudoku-src.html#1245"><span class="annot"><a href="Apps.Sudoku-src.html#1245"><span class="ju-inductive">Puzzle</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
    <span id="1246"><span class="annot"><a href="Apps.Sudoku-src.html#1246"><span class="annot"><a href="Apps.Sudoku-src.html#1246"><span class="ju-constructor">mkPuzzle</span></a></span></a></span></span> <span class="ju-delimiter">{</span>
      <span class="annot"><a href="Apps.Sudoku-src.html#1252"><span class="ju-var">logicHash</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Simulator.Denomination-src.html#655"><span class="ju-inductive">LogicHash</span></a></span><span class="ju-delimiter">;</span>
      <span class="annot"><a href="Apps.Sudoku-src.html#1253"><span class="ju-var">solution</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Data.ByteString-src.html#652"><span class="ju-function">ByteString</span></a></span>
    <span class="ju-delimiter">}</span><span class="ju-delimiter">;</span>
  <span id="1250"><span class="annot"><a href="Apps.Sudoku-src.html#1250"><span class="annot"><a href="Apps.Sudoku-src.html#1250"><span class="ju-function">
  mkResource</span></a></span></a></span></span> <span class="ju-delimiter">(</span><span class="annot"><a href="Apps.Sudoku-src.html#1254"><span class="ju-var">p</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Apps.Sudoku-src.html#1245"><span class="ju-inductive">Puzzle</span></a></span><span class="ju-delimiter">)</span> <span class="ju-delimiter">(</span><span class="annot"><a href="Apps.Sudoku-src.html#1255"><span class="ju-var">d</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Data.ByteString-src.html#652"><span class="ju-function">ByteString</span></a></span><span class="ju-delimiter">)</span> <span class="ju-delimiter">(</span><span class="annot"><a href="Apps.Sudoku-src.html#1256"><span class="ju-var">n</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Stdlib.Data.Int.Base-src.html#497"><span class="ju-inductive">Int</span></a></span><span class="ju-delimiter">)</span> <span class="ju-keyword">:</span> <span class="annot"><a href="Simulator.Resource-src.html#657"><span class="ju-inductive">Resource</span></a></span> <span class="ju-keyword">:=</span>
    <span class="annot"><a href="Simulator.Resource-src.html#658"><span class="ju-constructor">mkResource&#39;</span></a></span>
      <span class="ju-delimiter">(</span>logicHash <span class="ju-keyword">:=</span> <span class="annot"><a href="Apps.Sudoku-src.html#1247"><span class="ju-function">Puzzle<span class="ju-delimiter">.</span>logicHash</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1254"><span class="ju-var">p</span></a></span><span class="ju-delimiter">;</span>
      staticData <span class="ju-keyword">:=</span> <span class="annot"><a href="Apps.Sudoku-src.html#1248"><span class="ju-function">Puzzle<span class="ju-delimiter">.</span>solution</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1254"><span class="ju-var">p</span></a></span><span class="ju-delimiter">;</span>
      dynamicData <span class="ju-keyword">:=</span> <span class="annot"><a href="Apps.Sudoku-src.html#1255"><span class="ju-var">d</span></a></span><span class="ju-delimiter">;</span>
      quantity <span class="ju-keyword">:=</span> <span class="annot"><a href="Apps.Sudoku-src.html#1256"><span class="ju-var">n</span></a></span><span class="ju-delimiter">)</span><span class="ju-delimiter">;</span>
  <span id="1251"><span class="annot"><a href="Apps.Sudoku-src.html#1251"><span class="annot"><a href="Apps.Sudoku-src.html#1251"><span class="ju-function">
  denomination</span></a></span></a></span></span> <span class="ju-delimiter">(</span><span class="annot"><a href="Apps.Sudoku-src.html#1257"><span class="ju-var">p</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Apps.Sudoku-src.html#1245"><span class="ju-inductive">Puzzle</span></a></span><span class="ju-delimiter">)</span> <span class="ju-keyword">:</span> <span class="annot"><a href="Simulator.Denomination-src.html#656"><span class="ju-function">Denomination</span></a></span> <span class="ju-keyword">:=</span>
    <span class="annot"><a href="Apps.Sudoku-src.html#1247"><span class="ju-function">Puzzle<span class="ju-delimiter">.</span>logicHash</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1257"><span class="ju-var">p</span></a></span> <span class="annot"><a href="Stdlib.Data.List.Base-src.html#218"><span class="ju-constructor">::</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1248"><span class="ju-function">Puzzle<span class="ju-delimiter">.</span>solution</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1257"><span class="ju-var">p</span></a></span><span class="ju-delimiter">;</span>
<span class="ju-keyword">end</span><span class="ju-delimiter">;</span>

<span class="ju-judoc">{--</span> <span class="ju-judoc">Checks the state transition.</span>
<span class="ju-judoc">    * The new </span><span class="ju-judoc">;</span><span class="annot"><a href="Simulator.Resource-src.html#657"><span class="ju-inductive">Resource</span></a></span><span class="ju-judoc">;</span><span class="ju-judoc"> represents a valid Sudoku grid</span>
<span class="ju-judoc">    * The size of the encoded solution doesn&#39;t change.</span>
<span class="ju-judoc">    * The number of filled in squares does not decrease.</span>
<span class="ju-judoc">    * The claimed reward is equal to the number of newly filled in squares.</span>
<span class="ju-judoc">    * The only squares that change between the previous and new solutinos</span>
<span class="ju-judoc">    are changes from zero (i.e unfilled) to non-zero (i.e filled).</span>
<span class="ju-judoc"></span> <span class="ju-judoc">--}</span>
<span id="1259"><span class="annot"><a href="Apps.Sudoku-src.html#1259"><span class="annot"><a href="Apps.Sudoku-src.html#1259"><span class="ju-function">checkTransition</span></a></span></a></span></span> <span class="ju-delimiter">(</span><span class="annot"><a href="Apps.Sudoku-src.html#1261"><span class="ju-var">fromResource</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Simulator.Resource-src.html#657"><span class="ju-inductive">Resource</span></a></span><span class="ju-delimiter">)</span> <span class="ju-delimiter">(</span><span class="annot"><a href="Apps.Sudoku-src.html#1262"><span class="ju-var">toResource</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Simulator.Resource-src.html#657"><span class="ju-inductive">Resource</span></a></span><span class="ju-delimiter">)</span> <span class="ju-delimiter">(</span><span class="annot"><a href="Apps.Sudoku-src.html#1263"><span class="ju-var">reward</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Simulator.Resource-src.html#657"><span class="ju-inductive">Resource</span></a></span><span class="ju-delimiter">)</span>
  <span class="ju-keyword">:</span> <span class="annot"><a href="Stdlib.Data.Bool.Base-src.html#32"><span class="ju-inductive">Bool</span></a></span> <span class="ju-keyword">:=</span>
  <span class="ju-keyword">let</span>
    <span id="1264"><span class="annot"><a href="Apps.Sudoku-src.html#1264"><span class="annot"><a href="Apps.Sudoku-src.html#1264"><span class="ju-function">fromSolution</span></a></span></a></span></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Data.ByteString-src.html#652"><span class="ju-function">ByteString</span></a></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="Simulator.Resource-src.html#661"><span class="ju-function">Resource<span class="ju-delimiter">.</span>dynamicData</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1261"><span class="ju-var">fromResource</span></a></span><span class="ju-delimiter">;</span>
    <span id="1265"><span class="annot"><a href="Apps.Sudoku-src.html#1265"><span class="annot"><a href="Apps.Sudoku-src.html#1265"><span class="ju-function">toSolution</span></a></span></a></span></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Data.ByteString-src.html#652"><span class="ju-function">ByteString</span></a></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="Simulator.Resource-src.html#661"><span class="ju-function">Resource<span class="ju-delimiter">.</span>dynamicData</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1262"><span class="ju-var">toResource</span></a></span><span class="ju-delimiter">;</span>
    <span id="1266"><span class="annot"><a href="Apps.Sudoku-src.html#1266"><span class="annot"><a href="Apps.Sudoku-src.html#1266"><span class="ju-function">rewardQuantity</span></a></span></a></span></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Stdlib.Data.Int.Base-src.html#497"><span class="ju-inductive">Int</span></a></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="Simulator.Resource-src.html#662"><span class="ju-function">Resource<span class="ju-delimiter">.</span>quantity</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1263"><span class="ju-var">reward</span></a></span><span class="ju-delimiter">;</span>
    <span id="1267"><span class="annot"><a href="Apps.Sudoku-src.html#1267"><span class="annot"><a href="Apps.Sudoku-src.html#1267"><span class="ju-function">
    <span class="ju-comment">-- Find the differences between the fromSolution and the toSolution,</span>
    <span class="ju-comment">-- compared index-wise</span>
    diff</span></a></span></a></span></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Stdlib.Data.List.Base-src.html#216"><span class="ju-inductive">List</span></a></span> <span class="annot"><a href="Stdlib.Data.Nat.Base-src.html#78"><span class="ju-inductive"><span class="ju-delimiter">(</span>Nat</span></a></span> <span class="annot"><a href="Stdlib.Data.Product.Base-src.html#103"><span class="ju-inductive">×</span></a></span> <span class="annot"><a href="Stdlib.Data.Nat.Base-src.html#78"><span class="ju-inductive">Nat</span></a></span><span class="ju-delimiter">)</span> <span class="ju-keyword">:=</span>
      <span class="annot"><a href="Stdlib.Data.List.Base-src.html#226"><span class="ju-function">filter</span></a></span> <span id="1269"><span class="annot"><a href="Apps.Sudoku-src.html#1269"><span class="annot"><a href="Apps.Sudoku-src.html#1269"><span class="ju-var"><span class="ju-delimiter">(</span>x</span></a></span></a></span></span><span class="annot"><a href="Stdlib.Data.Product.Base-src.html#104"><span class="ju-constructor">,</span></a></span> <span id="1270"><span class="annot"><a href="Apps.Sudoku-src.html#1270"><span class="annot"><a href="Apps.Sudoku-src.html#1270"><span class="ju-var">y</span></a></span></a></span></span> <span class="ju-keyword">in</span> <span class="annot"><a href="Stdlib.Data.List.Base-src.html#245"><span class="ju-function">zip</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1264"><span class="ju-function">fromSolution</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1265"><span class="ju-function">toSolution</span></a></span><span class="ju-delimiter">)</span>
        <span class="annot"><a href="Apps.Sudoku-src.html#1269"><span class="ju-var">x</span></a></span> <span class="annot"><a href="Stdlib.Data.Nat.Ord-src.html#464"><span class="ju-function">Nat<span class="ju-delimiter">.</span>/=</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1270"><span class="ju-var">y</span></a></span><span class="ju-delimiter">;</span>
    <span id="1268"><span class="annot"><a href="Apps.Sudoku-src.html#1268"><span class="annot"><a href="Apps.Sudoku-src.html#1268"><span class="ju-function">
    <span class="ju-comment">-- Check that any solved squares in the toSolution are unsolved in the</span>
    <span class="ju-comment">-- fromSolution</span>
    checkSolvedFromUnsolved</span></a></span></a></span></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Stdlib.Data.Bool.Base-src.html#32"><span class="ju-inductive">Bool</span></a></span> <span class="ju-keyword">:=</span>
      <span class="annot"><a href="Stdlib.Data.List.Base-src.html#242"><span class="ju-function">all</span></a></span> <span id="1271"><span class="annot"><a href="Apps.Sudoku-src.html#1271"><span class="annot"><a href="Apps.Sudoku-src.html#1271"><span class="ju-var"><span class="ju-delimiter">(</span>consumedSquare</span></a></span></a></span></span><span class="annot"><a href="Stdlib.Data.Product.Base-src.html#104"><span class="ju-constructor">,</span></a></span> <span class="ju-keyword">_</span> <span class="ju-keyword">in</span> <span class="annot"><a href="Apps.Sudoku-src.html#1267"><span class="ju-function">diff</span></a></span><span class="ju-delimiter">)</span>
        <span class="annot"><a href="Stdlib.Data.Bool.Base-src.html#36"><span class="ju-function">not</span></a></span> <span class="annot"><a href="Apps.Sudoku.Validator-src.html#1190"><span class="ju-function"><span class="ju-delimiter">(</span>Sudoku<span class="ju-delimiter">.</span>entryFilled?</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1271"><span class="ju-var">consumedSquare</span></a></span><span class="ju-delimiter">)</span><span class="ju-delimiter">;</span>

  <span class="ju-keyword">in</span> <span class="annot"><a href="Stdlib.Data.List.Base-src.html#227"><span class="ju-function">length</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1265"><span class="ju-function">toSolution</span></a></span> <span class="annot"><a href="Stdlib.Data.Nat.Ord-src.html#463"><span class="ju-function">Nat<span class="ju-delimiter">.</span>==</span></a></span> <span class="annot"><a href="Stdlib.Data.List.Base-src.html#227"><span class="ju-function">length</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1264"><span class="ju-function">fromSolution</span></a></span>
    <span class="annot"><a href="Stdlib.Data.Bool.Base-src.html#38"><span class="ju-function">&amp;&amp;</span></a></span> <span class="annot"><a href="Apps.Sudoku.Serializer-src.html#1218"><span class="ju-function">Sudoku<span class="ju-delimiter">.</span>filledSquares</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1265"><span class="ju-function">toSolution</span></a></span> <span class="annot"><a href="Stdlib.Data.Nat.Ord-src.html#468"><span class="ju-function">Nat<span class="ju-delimiter">.</span>&gt;=</span></a></span> <span class="annot"><a href="Apps.Sudoku.Serializer-src.html#1218"><span class="ju-function">Sudoku<span class="ju-delimiter">.</span>filledSquares</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1264"><span class="ju-function">fromSolution</span></a></span>
    <span class="annot"><a href="Stdlib.Data.Bool.Base-src.html#38"><span class="ju-function">&amp;&amp;</span></a></span> <span class="annot"><a href="Apps.Sudoku.Validator-src.html#1195"><span class="ju-function">Sudoku<span class="ju-delimiter">.</span>validGrid?</span></a></span> <span class="annot"><a href="Apps.Sudoku.Serializer-src.html#1217"><span class="ju-function"><span class="ju-delimiter">(</span>Sudoku<span class="ju-delimiter">.</span>decode</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1265"><span class="ju-function">toSolution</span></a></span><span class="ju-delimiter">)</span>
    <span class="annot"><a href="Stdlib.Data.Bool.Base-src.html#38"><span class="ju-function">&amp;&amp;</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1268"><span class="ju-function">checkSolvedFromUnsolved</span></a></span>
    <span class="annot"><a href="Stdlib.Data.Bool.Base-src.html#38"><span class="ju-function">&amp;&amp;</span></a></span> <span class="annot"><a href="Stdlib.Data.Int.Base-src.html#498"><span class="ju-constructor">ofNat</span></a></span> <span class="annot"><a href="Stdlib.Data.List.Base-src.html#227"><span class="ju-function"><span class="ju-delimiter">(</span>length</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1267"><span class="ju-function">diff</span></a></span><span class="ju-delimiter">)</span> <span class="annot"><a href="Stdlib.Data.Int.Ord-src.html#564"><span class="ju-function">==</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1266"><span class="ju-function">rewardQuantity</span></a></span><span class="ju-delimiter">;</span>

<span class="ju-judoc">{--</span> <span class="ju-judoc">The logic function for the Sudoku solution parital transaction.</span>

<span class="ju-judoc">Performs the following check:</span>

<span class="ju-judoc">If there is a consumed </span><span class="ju-judoc">;</span><span class="annot"><a href="Simulator.Resource-src.html#657"><span class="ju-inductive">Resource</span></a></span><span class="ju-judoc">;</span><span class="ju-judoc"> representing a Sudoku puzzle then:</span>

<span class="ju-judoc">1. There is exactly one created </span><span class="ju-judoc">;</span><span class="annot"><a href="Simulator.Resource-src.html#657"><span class="ju-inductive">Resource</span></a></span><span class="ju-judoc">;</span><span class="ju-judoc"> corresponding to a new solution and</span>
<span class="ju-judoc">exactly one created </span><span class="ju-judoc">;</span><span class="annot"><a href="Simulator.Resource-src.html#657"><span class="ju-inductive">Resource</span></a></span><span class="ju-judoc">;</span><span class="ju-judoc"> representing the claimed reward.</span>

<span class="ju-judoc">2. The transition from a Sudoku puzzle to the new solution and reward</span>
<span class="ju-judoc">satisfies the </span><span class="ju-judoc">;</span><span class="annot"><a href="Apps.Sudoku-src.html#1259"><span class="ju-function">checkTransition</span></a></span><span class="ju-judoc">;</span><span class="ju-judoc"> function.</span>

<span class="ju-judoc">If the partial transaction does not consume a Sudoku puzzle then it is</span>
<span class="ju-judoc">vacuously valid.</span>

<span class="ju-judoc">If the logic function part of a </span><span class="ju-judoc">;</span><span class="annot"><a href="Simulator.Resource-src.html#657"><span class="ju-inductive">Resource</span></a></span><span class="ju-judoc">;</span><span class="ju-judoc"> that is created by the partial</span>
<span class="ju-judoc">transaction then it is valid.</span> <span class="ju-judoc">--}</span>
<span id="1260"><span class="annot"><a href="Apps.Sudoku-src.html#1260"><span class="annot"><a href="Apps.Sudoku-src.html#1260"><span class="ju-function">logicFunction</span></a></span></a></span></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Apps.Sudoku-src.html#1245"><span class="ju-inductive">Sudoku<span class="ju-delimiter">.</span>Puzzle</span></a></span> <span class="ju-keyword">-&gt;</span> <span class="annot"><a href="Simulator.PartialTx-src.html#709"><span class="ju-function">LogicFunction</span></a></span>
  <span class="ju-keyword">|</span> <span id="1272"><span class="annot"><a href="Apps.Sudoku-src.html#1272"><span class="annot"><a href="Apps.Sudoku-src.html#1272"><span class="ju-var">data</span></a></span></a></span></span> <span id="1273"><span class="annot"><a href="Apps.Sudoku-src.html#1273"><span class="annot"><a href="Apps.Sudoku-src.html#1273"><span class="ju-var">kind</span></a></span></a></span></span> <span id="1274"><span class="annot"><a href="Apps.Sudoku-src.html#1274"><span class="annot"><a href="Apps.Sudoku-src.html#1274"><span class="ju-var">tx</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
    <span class="ju-keyword">let</span>
      <span id="1275"><span class="annot"><a href="Apps.Sudoku-src.html#1275"><span class="annot"><a href="Apps.Sudoku-src.html#1275"><span class="ju-function">puzzleDenom</span></a></span></a></span></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Simulator.Denomination-src.html#656"><span class="ju-function">Denomination</span></a></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="Apps.Sudoku-src.html#1251"><span class="ju-function">Sudoku<span class="ju-delimiter">.</span>denomination</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1272"><span class="ju-var">data</span></a></span><span class="ju-delimiter">;</span>
      <span id="1276"><span class="annot"><a href="Apps.Sudoku-src.html#1276"><span class="annot"><a href="Apps.Sudoku-src.html#1276"><span class="ju-function">fromResources</span></a></span></a></span></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Stdlib.Data.List.Base-src.html#216"><span class="ju-inductive">List</span></a></span> <span class="annot"><a href="Simulator.Resource-src.html#657"><span class="ju-inductive">Resource</span></a></span> <span class="ju-keyword">:=</span>
        <span class="annot"><a href="Simulator.Resource-src.html#669"><span class="ju-function">resourcesForDenom</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1275"><span class="ju-function">puzzleDenom</span></a></span> <span class="annot"><a href="Simulator.PartialTx-src.html#707"><span class="ju-function"><span class="ju-delimiter">(</span>consumedResources</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1274"><span class="ju-var">tx</span></a></span><span class="ju-delimiter">)</span><span class="ju-delimiter">;</span>
      <span id="1277"><span class="annot"><a href="Apps.Sudoku-src.html#1277"><span class="annot"><a href="Apps.Sudoku-src.html#1277"><span class="ju-function">toResources</span></a></span></a></span></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Stdlib.Data.List.Base-src.html#216"><span class="ju-inductive">List</span></a></span> <span class="annot"><a href="Simulator.Resource-src.html#657"><span class="ju-inductive">Resource</span></a></span> <span class="ju-keyword">:=</span>
        <span class="annot"><a href="Simulator.Resource-src.html#669"><span class="ju-function">resourcesForDenom</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1275"><span class="ju-function">puzzleDenom</span></a></span> <span class="annot"><a href="Simulator.PartialTx-src.html#708"><span class="ju-function"><span class="ju-delimiter">(</span>createdResources</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1274"><span class="ju-var">tx</span></a></span><span class="ju-delimiter">)</span><span class="ju-delimiter">;</span>
      <span id="1278"><span class="annot"><a href="Apps.Sudoku-src.html#1278"><span class="annot"><a href="Apps.Sudoku-src.html#1278"><span class="ju-function">rewardResources</span></a></span></a></span></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Stdlib.Data.List.Base-src.html#216"><span class="ju-inductive">List</span></a></span> <span class="annot"><a href="Simulator.Resource-src.html#657"><span class="ju-inductive">Resource</span></a></span> <span class="ju-keyword">:=</span>
        <span class="annot"><a href="Simulator.Resource-src.html#669"><span class="ju-function">resourcesForDenom</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1242"><span class="ju-function">Reward<span class="ju-delimiter">.</span>denomination</span></a></span> <span class="annot"><a href="Simulator.PartialTx-src.html#708"><span class="ju-function"><span class="ju-delimiter">(</span>createdResources</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1274"><span class="ju-var">tx</span></a></span><span class="ju-delimiter">)</span><span class="ju-delimiter">;</span>
    <span class="ju-keyword">in</span> <span class="annot"><a href="Simulator.Resource-src.html#678"><span class="ju-function">isCreated</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1273"><span class="ju-var">kind</span></a></span>
      <span class="annot"><a href="Stdlib.Data.Bool.Base-src.html#37"><span class="ju-function">||</span></a></span> <span class="ju-keyword">case</span> <span class="annot"><a href="Apps.Sudoku-src.html#1276"><span class="ju-function">fromResources</span></a></span><span class="annot"><a href="Stdlib.Data.Product.Base-src.html#104"><span class="ju-constructor">,</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1277"><span class="ju-function">toResources</span></a></span><span class="annot"><a href="Stdlib.Data.Product.Base-src.html#104"><span class="ju-constructor">,</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1278"><span class="ju-function">rewardResources</span></a></span> <span class="ju-keyword">of</span> <span class="ju-delimiter">{</span>
        <span class="ju-keyword">|</span> <span class="annot"><a href="Stdlib.Data.List.Base-src.html#217"><span class="ju-constructor">nil</span></a></span><span class="annot"><a href="Stdlib.Data.Product.Base-src.html#104"><span class="ju-constructor">,</span></a></span> <span class="ju-keyword">_</span><span class="annot"><a href="Stdlib.Data.Product.Base-src.html#104"><span class="ju-constructor">,</span></a></span> <span class="ju-keyword">_</span> <span class="ju-keyword">:=</span> <span class="annot"><a href="Stdlib.Data.Bool.Base-src.html#33"><span class="ju-constructor">true</span></a></span>
        <span class="ju-keyword">|</span> <span id="1279"><span class="annot"><a href="Apps.Sudoku-src.html#1279"><span class="annot"><a href="Apps.Sudoku-src.html#1279"><span class="ju-var">fromResource</span></a></span></a></span></span> <span class="annot"><a href="Stdlib.Data.List.Base-src.html#218"><span class="ju-constructor">::</span></a></span> <span class="annot"><a href="Stdlib.Data.List.Base-src.html#217"><span class="ju-constructor">nil</span></a></span><span class="annot"><a href="Stdlib.Data.Product.Base-src.html#104"><span class="ju-constructor">,</span></a></span> <span id="1280"><span class="annot"><a href="Apps.Sudoku-src.html#1280"><span class="annot"><a href="Apps.Sudoku-src.html#1280"><span class="ju-var">toResource</span></a></span></a></span></span> <span class="annot"><a href="Stdlib.Data.List.Base-src.html#218"><span class="ju-constructor">::</span></a></span> <span class="annot"><a href="Stdlib.Data.List.Base-src.html#217"><span class="ju-constructor">nil</span></a></span><span class="annot"><a href="Stdlib.Data.Product.Base-src.html#104"><span class="ju-constructor">,</span></a></span> <span id="1281"><span class="annot"><a href="Apps.Sudoku-src.html#1281"><span class="annot"><a href="Apps.Sudoku-src.html#1281"><span class="ju-var">reward</span></a></span></a></span></span> <span class="annot"><a href="Stdlib.Data.List.Base-src.html#218"><span class="ju-constructor">::</span></a></span> <span class="annot"><a href="Stdlib.Data.List.Base-src.html#217"><span class="ju-constructor">nil</span></a></span> <span class="ju-keyword">:=</span>
          <span class="annot"><a href="Apps.Sudoku-src.html#1259"><span class="ju-function">checkTransition</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1279"><span class="ju-var">fromResource</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1280"><span class="ju-var">toResource</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1281"><span class="ju-var">reward</span></a></span>
        <span class="ju-keyword">|</span> <span class="ju-keyword">_</span><span class="annot"><a href="Stdlib.Data.Product.Base-src.html#104"><span class="ju-constructor">,</span></a></span> <span class="ju-keyword">_</span><span class="annot"><a href="Stdlib.Data.Product.Base-src.html#104"><span class="ju-constructor">,</span></a></span> <span class="ju-keyword">_</span> <span class="ju-keyword">:=</span> <span class="annot"><a href="Stdlib.Data.Bool.Base-src.html#34"><span class="ju-constructor">false</span></a></span>
      <span class="ju-delimiter">}</span><span class="ju-delimiter">;</span>

<span class="ju-comment">-- Definitions relating to the Dealer participant in the application</span>
<span class="ju-keyword">module</span> <span id="1297"><span class="annot"><a href="Apps.Sudoku-src.html#1297"><span class="annot"><a href="Apps.Sudoku-src.html#1297"><span class="ju-var">Dealer</span></a></span></a></span></span><span class="ju-delimiter">;</span>
  <span class="ju-judoc">{--</span> <span class="ju-judoc">The logic function for the Sudoku dealer parital transaction.</span>
  <span class="ju-judoc"></span>
  <span class="ju-judoc">   Performs the following check:</span>
  <span class="ju-judoc"></span>
  <span class="ju-judoc">   If there is exactly one consumed </span><span class="ju-judoc">;</span><span class="annot"><a href="Simulator.Resource-src.html#657"><span class="ju-inductive">Resource</span></a></span><span class="ju-judoc">;</span><span class="ju-judoc"> representing a Sudoku puzzle then:</span>
  <span class="ju-judoc"></span>
  <span class="ju-judoc">   1. The solution matches the Dealer&#39;s solution.</span>
  <span class="ju-judoc"></span>
  <span class="ju-judoc">   If the partial transaction does not consume a Sudoku puzzle then it is</span>
  <span class="ju-judoc">   vacuously valid.</span>
  <span class="ju-judoc"></span>
  <span class="ju-judoc">   If the logic function part of a </span><span class="ju-judoc">;</span><span class="annot"><a href="Simulator.Resource-src.html#657"><span class="ju-inductive">Resource</span></a></span><span class="ju-judoc">;</span><span class="ju-judoc"> that is created by the partial</span>
  <span class="ju-judoc">   transaction then it is valid.</span>
  <span class="ju-judoc"></span> <span class="ju-judoc">--}</span>
  <span id="1282"><span class="annot"><a href="Apps.Sudoku-src.html#1282"><span class="annot"><a href="Apps.Sudoku-src.html#1282"><span class="ju-function">
  logicFunction</span></a></span></a></span></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Apps.Sudoku-src.html#1245"><span class="ju-inductive">Sudoku<span class="ju-delimiter">.</span>Puzzle</span></a></span> <span class="ju-keyword">-&gt;</span> <span class="annot"><a href="Simulator.PartialTx-src.html#709"><span class="ju-function">LogicFunction</span></a></span>
    <span class="ju-keyword">|</span> <span id="1287"><span class="annot"><a href="Apps.Sudoku-src.html#1287"><span class="annot"><a href="Apps.Sudoku-src.html#1287"><span class="ju-var">p</span></a></span></a></span></span> <span id="1288"><span class="annot"><a href="Apps.Sudoku-src.html#1288"><span class="annot"><a href="Apps.Sudoku-src.html#1288"><span class="ju-var">kind</span></a></span></a></span></span> <span id="1289"><span class="annot"><a href="Apps.Sudoku-src.html#1289"><span class="annot"><a href="Apps.Sudoku-src.html#1289"><span class="ju-var">tx</span></a></span></a></span></span> <span class="ju-keyword">:=</span>
      <span class="ju-keyword">let</span>
        <span id="1290"><span class="annot"><a href="Apps.Sudoku-src.html#1290"><span class="annot"><a href="Apps.Sudoku-src.html#1290"><span class="ju-function">puzzleResources</span></a></span></a></span></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Stdlib.Data.List.Base-src.html#216"><span class="ju-inductive">List</span></a></span> <span class="annot"><a href="Simulator.Resource-src.html#657"><span class="ju-inductive">Resource</span></a></span> <span class="ju-keyword">:=</span>
          <span class="annot"><a href="Simulator.Resource-src.html#669"><span class="ju-function">resourcesForDenom</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1251"><span class="ju-function"><span class="ju-delimiter">(</span>Sudoku<span class="ju-delimiter">.</span>denomination</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1287"><span class="ju-var">p</span></a></span><span class="ju-delimiter">)</span> <span class="annot"><a href="Simulator.PartialTx-src.html#708"><span class="ju-function"><span class="ju-delimiter">(</span>createdResources</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1289"><span class="ju-var">tx</span></a></span><span class="ju-delimiter">)</span><span class="ju-delimiter">;</span>
        <span id="1291"><span class="annot"><a href="Apps.Sudoku-src.html#1291"><span class="annot"><a href="Apps.Sudoku-src.html#1291"><span class="ju-function">
        checkPuzzle</span></a></span></a></span></span> <span class="ju-delimiter">(</span><span class="annot"><a href="Apps.Sudoku-src.html#1292"><span class="ju-var">r</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Simulator.Resource-src.html#657"><span class="ju-inductive">Resource</span></a></span><span class="ju-delimiter">)</span> <span class="ju-keyword">:</span> <span class="annot"><a href="Stdlib.Data.Bool.Base-src.html#32"><span class="ju-inductive">Bool</span></a></span> <span class="ju-keyword">:=</span>
          <span class="annot"><a href="Stdlib.Trait.Eq-src.html#54"><span class="ju-function">Eq<span class="ju-delimiter">.</span>eq</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1248"><span class="ju-function"><span class="ju-delimiter">(</span>Sudoku<span class="ju-delimiter">.</span>Puzzle<span class="ju-delimiter">.</span>solution</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1287"><span class="ju-var">p</span></a></span><span class="ju-delimiter">)</span> <span class="annot"><a href="Simulator.Resource-src.html#661"><span class="ju-function"><span class="ju-delimiter">(</span>Resource<span class="ju-delimiter">.</span>dynamicData</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1292"><span class="ju-var">r</span></a></span><span class="ju-delimiter">)</span><span class="ju-delimiter">;</span>
      <span class="ju-keyword">in</span> <span class="annot"><a href="Simulator.Resource-src.html#678"><span class="ju-function">isCreated</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1288"><span class="ju-var">kind</span></a></span>
        <span class="annot"><a href="Stdlib.Data.Bool.Base-src.html#37"><span class="ju-function">||</span></a></span> <span class="ju-keyword">case</span> <span class="annot"><a href="Apps.Sudoku-src.html#1290"><span class="ju-function">puzzleResources</span></a></span> <span class="ju-keyword">of</span> <span class="ju-delimiter">{</span>
          <span class="ju-keyword">|</span> <span class="annot"><a href="Stdlib.Data.List.Base-src.html#217"><span class="ju-constructor">nil</span></a></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="Stdlib.Data.Bool.Base-src.html#33"><span class="ju-constructor">true</span></a></span>
          <span class="ju-keyword">|</span> <span id="1293"><span class="annot"><a href="Apps.Sudoku-src.html#1293"><span class="annot"><a href="Apps.Sudoku-src.html#1293"><span class="ju-var">puzzleResource</span></a></span></a></span></span> <span class="annot"><a href="Stdlib.Data.List.Base-src.html#218"><span class="ju-constructor">::</span></a></span> <span class="annot"><a href="Stdlib.Data.List.Base-src.html#217"><span class="ju-constructor">nil</span></a></span> <span class="ju-keyword">:=</span> <span class="annot"><a href="Apps.Sudoku-src.html#1291"><span class="ju-function">checkPuzzle</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1293"><span class="ju-var">puzzleResource</span></a></span>
          <span class="ju-keyword">|</span> <span class="ju-keyword">_</span> <span class="ju-keyword">:=</span> <span class="annot"><a href="Stdlib.Data.Bool.Base-src.html#34"><span class="ju-constructor">false</span></a></span>
        <span class="ju-delimiter">}</span><span class="ju-delimiter">;</span>
  <span id="1283"><span class="annot"><a href="Apps.Sudoku-src.html#1283"><span class="annot"><a href="Apps.Sudoku-src.html#1283"><span class="ju-function">
  logicHash</span></a></span></a></span></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Apps.Sudoku-src.html#1245"><span class="ju-inductive">Sudoku<span class="ju-delimiter">.</span>Puzzle</span></a></span> <span class="ju-keyword">-&gt;</span> <span class="annot"><a href="Simulator.Denomination-src.html#655"><span class="ju-inductive">LogicHash</span></a></span>
    <span class="ju-keyword">|</span> <span class="ju-keyword">_</span> <span class="ju-keyword">:=</span> <span class="ju-number">2</span><span class="ju-delimiter">;</span>
  <span id="1284"><span class="annot"><a href="Apps.Sudoku-src.html#1284"><span class="annot"><a href="Apps.Sudoku-src.html#1284"><span class="ju-function">
  staticData</span></a></span></a></span></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Apps.Sudoku-src.html#1245"><span class="ju-inductive">Sudoku<span class="ju-delimiter">.</span>Puzzle</span></a></span> <span class="ju-keyword">-&gt;</span> <span class="annot"><a href="Data.ByteString-src.html#652"><span class="ju-function">ByteString</span></a></span>
    <span class="ju-keyword">|</span> <span class="ju-keyword">_</span> <span class="ju-keyword">:=</span> <span class="ju-number">2</span> <span class="annot"><a href="Stdlib.Data.List.Base-src.html#218"><span class="ju-constructor">::</span></a></span> <span class="annot"><a href="Stdlib.Data.List.Base-src.html#217"><span class="ju-constructor">nil</span></a></span><span class="ju-delimiter">;</span>
  <span id="1285"><span class="annot"><a href="Apps.Sudoku-src.html#1285"><span class="annot"><a href="Apps.Sudoku-src.html#1285"><span class="ju-function">
  denomination</span></a></span></a></span></span> <span class="ju-delimiter">(</span><span class="annot"><a href="Apps.Sudoku-src.html#1294"><span class="ju-var">d</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Apps.Sudoku-src.html#1245"><span class="ju-inductive">Sudoku<span class="ju-delimiter">.</span>Puzzle</span></a></span><span class="ju-delimiter">)</span> <span class="ju-keyword">:</span> <span class="annot"><a href="Simulator.Denomination-src.html#656"><span class="ju-function">Denomination</span></a></span> <span class="ju-keyword">:=</span>
    <span class="annot"><a href="Apps.Sudoku-src.html#1283"><span class="ju-function">logicHash</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1294"><span class="ju-var">d</span></a></span> <span class="annot"><a href="Stdlib.Data.List.Base-src.html#218"><span class="ju-constructor">::</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1284"><span class="ju-function">staticData</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1294"><span class="ju-var">d</span></a></span><span class="ju-delimiter">;</span>
  <span id="1286"><span class="annot"><a href="Apps.Sudoku-src.html#1286"><span class="annot"><a href="Apps.Sudoku-src.html#1286"><span class="ju-function">
  mkResource</span></a></span></a></span></span> <span class="ju-delimiter">(</span><span class="annot"><a href="Apps.Sudoku-src.html#1295"><span class="ju-var">d</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Apps.Sudoku-src.html#1245"><span class="ju-inductive">Sudoku<span class="ju-delimiter">.</span>Puzzle</span></a></span><span class="ju-delimiter">)</span> <span class="ju-delimiter">(</span><span class="annot"><a href="Apps.Sudoku-src.html#1296"><span class="ju-var">n</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Stdlib.Data.Int.Base-src.html#497"><span class="ju-inductive">Int</span></a></span><span class="ju-delimiter">)</span> <span class="ju-keyword">:</span> <span class="annot"><a href="Simulator.Resource-src.html#657"><span class="ju-inductive">Resource</span></a></span> <span class="ju-keyword">:=</span>
    <span class="annot"><a href="Simulator.Resource-src.html#658"><span class="ju-constructor">mkResource&#39;</span></a></span>
      <span class="ju-delimiter">(</span>logicHash <span class="ju-keyword">:=</span> <span class="annot"><a href="Apps.Sudoku-src.html#1283"><span class="ju-function">logicHash</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1295"><span class="ju-var">d</span></a></span><span class="ju-delimiter">;</span>
      staticData <span class="ju-keyword">:=</span> <span class="annot"><a href="Apps.Sudoku-src.html#1284"><span class="ju-function">staticData</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1295"><span class="ju-var">d</span></a></span><span class="ju-delimiter">;</span>
      dynamicData <span class="ju-keyword">:=</span> <span class="annot"><a href="Stdlib.Data.List.Base-src.html#217"><span class="ju-constructor">nil</span></a></span><span class="ju-delimiter">;</span>
      quantity <span class="ju-keyword">:=</span> <span class="annot"><a href="Apps.Sudoku-src.html#1296"><span class="ju-var">n</span></a></span><span class="ju-delimiter">)</span><span class="ju-delimiter">;</span>
<span class="ju-keyword">end</span><span class="ju-delimiter">;</span>
<span id="1298"><span class="annot"><a href="Apps.Sudoku-src.html#1298"><span class="annot"><a href="Apps.Sudoku-src.html#1298"><span class="ju-function">
dealer</span></a></span></a></span></span> <span class="ju-delimiter">(</span><span class="annot"><a href="Apps.Sudoku-src.html#1300"><span class="ju-var">puzzle</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Apps.Sudoku-src.html#1245"><span class="ju-inductive">Sudoku<span class="ju-delimiter">.</span>Puzzle</span></a></span><span class="ju-delimiter">)</span> <span class="ju-delimiter">(</span><span class="annot"><a href="Apps.Sudoku-src.html#1301"><span class="ju-var">initialBoard</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Data.ByteString-src.html#652"><span class="ju-function">ByteString</span></a></span><span class="ju-delimiter">)</span> <span class="ju-keyword">:</span> <span class="annot"><a href="Simulator.PartialTx-src.html#700"><span class="ju-inductive">PartialTx</span></a></span> <span class="ju-keyword">:=</span>
  <span class="annot"><a href="Simulator.PartialTx-src.html#701"><span class="ju-constructor">mkPartialTx</span></a></span>
    <span class="ju-delimiter">(</span>consumedPair <span class="ju-keyword">:=</span> <span class="annot"><a href="Apps.Sudoku-src.html#1241"><span class="ju-function">Reward<span class="ju-delimiter">.</span>mkResource</span></a></span>
        <span class="annot"><a href="Stdlib.Data.Int.Base-src.html#498"><span class="ju-constructor"><span class="ju-delimiter">(</span>ofNat</span></a></span> <span class="annot"><a href="Apps.Sudoku.Serializer-src.html#1219"><span class="ju-function"><span class="ju-delimiter">(</span>Sudoku<span class="ju-delimiter">.</span>emptySquares</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1301"><span class="ju-var">initialBoard</span></a></span><span class="ju-delimiter">)</span><span class="ju-delimiter">)</span>
      <span class="annot"><a href="Stdlib.Data.Product.Base-src.html#104"><span class="ju-constructor">,</span></a></span> <span class="annot"><a href="Simulator.BuiltinResources-src.html#1071"><span class="ju-function">dummyResource</span></a></span><span class="ju-delimiter">;</span>
    createdPair <span class="ju-keyword">:=</span> <span class="annot"><a href="Apps.Sudoku-src.html#1286"><span class="ju-function">Dealer<span class="ju-delimiter">.</span>mkResource</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1300"><span class="ju-var">puzzle</span></a></span> <span class="ju-number">1</span>
      <span class="annot"><a href="Stdlib.Data.Product.Base-src.html#104"><span class="ju-constructor">,</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1250"><span class="ju-function">Sudoku<span class="ju-delimiter">.</span>mkResource</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1300"><span class="ju-var">puzzle</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1301"><span class="ju-var">initialBoard</span></a></span> <span class="ju-number">1</span><span class="ju-delimiter">)</span><span class="ju-delimiter">;</span>
<span id="1299"><span class="annot"><a href="Apps.Sudoku-src.html#1299"><span class="annot"><a href="Apps.Sudoku-src.html#1299"><span class="ju-function">
logicFunctions</span></a></span></a></span></span> <span class="ju-delimiter">(</span><span class="annot"><a href="Apps.Sudoku-src.html#1302"><span class="ju-var">puzzle</span></a></span> <span class="ju-keyword">:</span> <span class="annot"><a href="Apps.Sudoku-src.html#1245"><span class="ju-inductive">Sudoku<span class="ju-delimiter">.</span>Puzzle</span></a></span><span class="ju-delimiter">)</span> <span class="ju-keyword">:</span> <span class="annot"><a href="Data.Map-src.html#998"><span class="ju-inductive">Map</span></a></span> <span class="annot"><a href="Simulator.Denomination-src.html#655"><span class="ju-inductive">LogicHash</span></a></span> <span class="annot"><a href="Simulator.PartialTx-src.html#709"><span class="ju-function">LogicFunction</span></a></span> <span class="ju-keyword">:=</span>
  <span class="annot"><a href="Simulator.BuiltinResources-src.html#1072"><span class="ju-function">mkLogicFunctionMap</span></a></span>
    <span class="annot"><a href="Apps.Sudoku-src.html#1247"><span class="ju-function"><span class="ju-delimiter">(</span><span class="ju-delimiter">(</span>Sudoku<span class="ju-delimiter">.</span>Puzzle<span class="ju-delimiter">.</span>logicHash</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1302"><span class="ju-var">puzzle</span></a></span><span class="annot"><a href="Stdlib.Data.Product.Base-src.html#104"><span class="ju-constructor">,</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1260"><span class="ju-function">logicFunction</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1302"><span class="ju-var">puzzle</span></a></span><span class="ju-delimiter">)</span>
      <span class="annot"><a href="Stdlib.Data.List.Base-src.html#218"><span class="ju-constructor">::</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1283"><span class="ju-function"><span class="ju-delimiter">(</span>Dealer<span class="ju-delimiter">.</span>logicHash</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1302"><span class="ju-var">puzzle</span></a></span><span class="annot"><a href="Stdlib.Data.Product.Base-src.html#104"><span class="ju-constructor">,</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1282"><span class="ju-function">Dealer<span class="ju-delimiter">.</span>logicFunction</span></a></span> <span class="annot"><a href="Apps.Sudoku-src.html#1302"><span class="ju-var">puzzle</span></a></span><span class="ju-delimiter">)</span>
      <span class="annot"><a href="Stdlib.Data.List.Base-src.html#218"><span class="ju-constructor">::</span></a></span> <span class="annot"><a href="Stdlib.Data.List.Base-src.html#217"><span class="ju-constructor">nil</span></a></span><span class="ju-delimiter">)</span><span class="ju-delimiter">;</span>
</pre><footer><pre>Powered by <a href="https://juvix.org">Juvix </a><a href="https://github.com/anoma/juvix/commit/6050b40">0.5.1-6050b40</a></pre></footer><span>Last modified on 2023-09-17 23:39 UTC</span></html>